var Se=Object.defineProperty,Ie=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var Z=(t,s,n)=>s in t?Se(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,W=(t,s)=>{for(var n in s||(s={}))Re.call(s,n)&&Z(t,n,s[n]);if(X)for(var n of X(s))Ce.call(s,n)&&Z(t,n,s[n]);return t},ee=(t,s)=>Ie(t,Fe(s));import{i as Ue,g as ke,a as Le,S as Pe,r as l,o as Ae,j as o,b as e,c as Te,d as De,s as Me,e as Ee,N as _e,C as b,I as te,y as A,f as L,h as E,u as _,F as I,k as Y,L as O,l as Oe,m as se,n as Q,p as P,q as g,A as D,B as F,v as q,t as z,w as B,x as G,z as Qe,D as V,P as ne,E as j,G as re,H as $,J as ae,K as qe,M as ze,O as M,Q as Be,R as Ge,T as je,U as le,V as $e,W as U,X as Ke,Y as He,Z as We,_ as Ye,$ as Ve,a0 as Je}from"./vendor.3da3ee1c.js";const Xe=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};Xe();const Ze={apiKey:"AIzaSyCNYDAxs-8T9B6_qIIf7Ox8A6gmmayq7kQ",authDomain:"firenote-25182.firebaseapp.com",projectId:"firenote-25182",storageBucket:"firenote-25182.appspot.com",messagingSenderId:"473871512660",appId:"1:473871512660:web:35225075fdc14847ad69c1"},oe=Ue(Ze),K=ke(),H=Le(oe),R=Pe(oe),ie=l.exports.createContext(),x=()=>l.exports.useContext(ie),et=({children:t})=>{const[s,n]=l.exports.useState(null),[a,r]=l.exports.useState(!0),i=async(p,c)=>De(K,p,c),u=(p,c)=>Me(K,p,c),h=(p,c)=>Ee(K);l.exports.useEffect(()=>{Ae(K,p=>{n(p),r(!1)})},[]);const d={signup:i,signin:u,signout:h,onlineUser:s,loading:a};return o(ie.Provider,{value:d,children:[a&&e("div",{className:"d-flex justify-content-center vh-100 my-5 align-items-center",children:e(Te.HashLoader,{color:"#222",size:40})}),!a&&t]})},de=({children:t,redirectTo:s})=>{const{onlineUser:n}=x();return n?t:e(_e,{to:s})},ce=({query:t})=>e(b,{children:t.data===void 0||t.data.length==0?e(b,{className:"text-center",children:"This folder does not contain any images, go to settings to upload"}):e(te,{children:e("div",{className:"img-grid",children:t.data&&t.data.map(s=>e("div",{className:s.className?s.className:"img-wrap",children:e("img",{src:s.url,alt:"uploaded image"})},s._id))})})}),ue=(t={})=>{const{onlineUser:s}=x(),n=A(R,"images"),a=t.fetchUserImages?["images",s.uid]:["images"],r=t.fetchUserImages?L(n,E("owner","==",s.uid)):L(n);return _(a,r,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},tt=()=>{const{onlineUser:t}=x(),s=ue();return o(I,{children:[e("div",{className:"text-center",children:t?e("p",{children:'Upload folders and images under "my profile" in menu '}):e("p",{children:"Sign up to upload images!"})}),e("div",{className:"text-center",children:e("h1",{children:"Latest from users"})}),e(ce,{query:s})]})},st=()=>{const{onlineUser:t}=x();return e(Y,{variant:"light",expand:"md",children:o(b,{children:[o(O,{to:"/",className:"navbar-brand",children:[e("span",{role:"img"})," FireNote"]}),e(Y.Toggle,{"aria-controls":"basic-navbar-nav"}),e(Y.Collapse,{id:"basic-navbar-nav",children:e(Oe,{className:"ms-auto",children:t?e(I,{children:o(se,{title:t.email,id:"basic-nav-dropdown",children:[e(Q,{to:"/myprofile",className:"nav-link",children:"My Profile"}),e(se.Divider,{}),e(Q,{to:"/logout",className:"nav-link",children:" Logout"})]})}):o(I,{children:[e(Q,{to:"/loginPage",className:"nav-link",children:"Login"}),e(Q,{to:"/login",className:"nav-link"})]})})})]})})},pe=()=>{const t=l.exports.useRef(),s=l.exports.useRef(),n=P(),{signin:a}=x(),[r,i]=l.exports.useState(null),[u,h]=l.exports.useState(!0);return o(b,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Login"}),o(g,{onSubmit:async p=>{p.preventDefault(),i(null);try{h(!0),await a(t.current.value,s.current.value),n("/")}catch(c){i(c.message),h(!1)}},children:[r&&e(D,{variant:"danger",children:r}),o(g.Group,{id:"email",children:[e(g.Label,{children:"Email"}),e(g.Control,{type:"email",ref:t,placeholder:"Enter email",required:!0})]}),o(g.Group,{id:"Password",children:[e(g.Label,{children:"Password"}),e(g.Control,{type:"password",ref:s,placeholder:"Password",required:!0})]}),e(F,{className:"text-center",variant:"primary",type:"submit",children:"Sign In"})]}),o("div",{className:"text-center mt-3",children:["Need an account? ",e(O,{to:"/signup",children:"Sign Up"})]})]})},he=()=>{const{signup:t}=x(),[s,n]=l.exports.useState(),a=l.exports.useRef(),r=l.exports.useRef(),i=l.exports.useRef(),[u,h]=l.exports.useState(null),d=P();return o(b,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Sign up"}),o(g,{onSubmit:async c=>{if(c.preventDefault(),r.current.value!==i.current.value)return h("The passwords does not match");h(null);try{n(!0),await t(a.current.value,r.current.value),d("/")}catch(m){h(m.message),n(!1)}},children:[u&&e(D,{variant:"danger",children:u}),o(g.Group,{id:"email",children:[e(g.Label,{children:"Email"}),e(g.Control,{ref:a,type:"email",placeholder:"Email",required:!0})]}),o(g.Group,{id:"password",children:[e(g.Label,{children:"Create a password"}),e(g.Control,{ref:r,type:"password",name:"password",placeholder:"Password",required:!0})]}),o(g.Group,{id:"password",children:[e(g.Label,{children:"Confirm password"}),e(g.Control,{ref:i,type:"password",placeholder:"Confirm Password",required:!0})]}),e(F,{disabled:s,className:"text-center",variant:"primary",type:"submit",children:"Submit"})]}),o("div",{className:"text-center mt-3",children:["Already a member? ",e(O,{to:"/login",children:"Log In"})]})]})},nt=()=>{const{onlineUser:t}=x();return e(I,{children:t?e(pe,{}):e(he,{})})},rt=()=>{const{signout:t}=x(),s=P();return l.exports.useEffect(async()=>{await t(),s("/")},[]),e(b,{className:"col-md-4 py-5",children:e("div",{className:"text-center",children:e("p",{children:" You're being signed out"})})})},at=t=>{const[s,n]=l.exports.useState(0),[a,r]=l.exports.useState(null),[i,u]=l.exports.useState(null),{onlineUser:h}=x(),d=q();return l.exports.useEffect(()=>{const p=z(H,`${h.uid}/images/ ${t.name}`),c=A(R,"images");B(p,t).on("state_changed",m=>{n(Math.round(m.bytesTransferred/m.totalBytes*100))},m=>{r(m)},async()=>{const m=await G(p);u(m),await Qe(c,{created:V(),name:t.name,owner:h.uid,path:p.fullPath,size:t.size,type:t.type,url:m,_id:d})})},[t]),{progress:s,url:i,message:a}},lt=({file:t,setFile:s})=>{const{progress:n,url:a}=at(t);return l.exports.useEffect(()=>{a&&s(null)},[a,s]),e(I,{children:n&&e(ne,{variant:"success",animated:!0,now:n})})},ot=()=>{const[t,s]=l.exports.useState(null),[n,a]=l.exports.useState(null),r=i=>{let u=i.target.files[0];u&&u.type.includes("image")?(s(u),a({type:"success",msg:"File uploaded"})):(s(null),a({type:"warning",msg:"File must be an image"}))};return e("div",{className:"UploadForm",children:o(g,{children:[n&&e(D,{variant:n.type,children:n.msg}),e("h2",{children:"Upload Image"}),o("label",{children:[e("input",{type:"file",onChange:r}),e("span",{children:"+"})]}),e("div",{className:"output",children:t&&e(lt,{file:t,setFile:s})})]})})},me=(t={})=>{const{onlineUser:s}=x(),n=t.fetchReviewFolders?A(R,"revalbums"):A(R,s.uid),a=t.fetchReviewFolders?["revalbums"]:[s.uid],r=t.fetchReviewFolders?L(n,E("owner","==",s.uid)):L(n);return _(a,r,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},it=({query:t})=>{const s=P(),{onlineUser:n}=x();return o(b,{children:[o("div",{className:"text-center",children:[" ",e("h1",{children:"Folders"})," "]}),e("div",{className:"folder-grid",children:t.data&&t.data.map(a=>e("div",{className:"folder-wrap",onClick:()=>s("/folders/"+a.folderName+"/"+a._id+"/"+n.uid),children:o("h6",{children:["  ",a.folderName," "]})},a._id))})]})},dt=({query:t})=>{const s=P(),{onlineUser:n}=x();return o(b,{children:[o("div",{className:"text-center",children:[" ",e("h1",{children:"Reviews"})," "]}),e("div",{className:"folder-grid",children:t.data&&t.data.map(a=>e("div",{className:"folder-wrap",onClick:()=>s("/revfolders/"+a.folderName+"/"+a._id+"/"+n.uid),children:o("h6",{children:["  ",a.folderName," "]})},a._id))})]})},ct=()=>{const t=ue({fetchUserImages:!0}),s=me(),n=me({fetchReviewFolders:!0});return e("div",{className:"myprofile",children:o(b,{className:"py-3",children:[e("h1",{children:"Profile"}),e(ot,{}),o("div",{className:"text-center",children:[e("h2",{children:" Upload Folder"}),e(O,{to:"/uploadfolder",children:e("span",{className:"plus",children:"+"})})]}),e(it,{query:s}),e(dt,{query:n}),e(ce,{query:t})]})})},ut=()=>{const[t,s]=l.exports.useState(0),[n,a]=l.exports.useState(null),{onlineUser:r}=x(),[i,u]=l.exports.useState(null);return{progress:t,UploadFolder:(d,p,c)=>{const m=q();p===void 0&&(p=[]),c===void 0&&(c=[]);const y=z(H,"folders/"+m);B(y,d,p).on("state_changed",v=>{s(Math.round(v.bytesTransferred/v.totalBytes*100))},v=>{a(v)},async()=>{const v=await G(y);u(v);const w=j(R,r.uid,d.name);await re(w,{created:V(),folderName:d.name,path:y.fullPath,owner:r.uid,url:v,_id:m,folderCover:p.name,folderImages:c})})},url:i,message:n}},pt=()=>{const{UploadFolder:t}=ut(),s=l.exports.useRef(),n=l.exports.useRef(),[a,r]=l.exports.useState(!1),[i,u]=l.exports.useState(null),[h,d]=l.exports.useState(null),[p,c]=l.exports.useState(),m=()=>{const w=s.current.value;return c(w),p},y=w=>{let T=w.target.files[0];T&&T.type.includes("image")?u(T):(u(null),d({type:"warning",msg:"File must be an image"}))};return e(b,{children:o(g,{onSubmit:async w=>{w.preventDefault(),await t({name:s.current.value},i),d({type:"success",msg:"Folder uploaded, go to folder to upload images"})},children:[e("h1",{children:"Create new Folder"}),o(g.Group,{id:"folder",className:"mb-3",children:[e(g.Label,{children:"Foldername:"}),e(g.Control,{type:"text",ref:s,onChange:m}),e(g.Label,{children:"Upload cover: "}),e("input",{type:"file",ref:n,onChange:y})]}),e(F,{disabled:a,type:"submit",children:e("h4",{children:"Create Folder"})}),h&&e(D,{variant:h.type,children:h.msg})]})})},ge=()=>{const t=$(),[s,n]=l.exports.useState(t.folderid);return{updateTitle:async r=>{const i=j(R,t.userid,s);ae(i,{folderName:r})}}},ht=()=>{const[t,s]=l.exports.useState(0),[n,a]=l.exports.useState(null),[r,i]=l.exports.useState(null),{onlineUser:u}=x();return{progress:t,url:r,message:n,uploadImage:async(d,p)=>{if(!d||d==null)return;const c=q(),m=z(H,`${u.uid}/${p}/${d.name}`),y=j(R,u.uid,p);B(m,d).on("state_changed",v=>{s(Math.round(v.bytesTransferred/v.totalBytes*100))},v=>{a(v)},async()=>{const v=await G(m);i(v),await ae(y,{folderImages:qe({name:d.name,owner:u.uid,path:m.fullPath,size:d.size,type:d.type,url:v,_id:c})}),s(null)})}}},fe=t=>{const s=ht(),n=l.exports.useCallback(p=>{!p.length||p.forEach(c=>{s.uploadImage(c,t.folderid)})},[]),{getRootProps:a,getInputProps:r,acceptedFiles:i,isDragActive:u,isDragAccept:h,isDragReject:d}=ze({accept:"image/gif, image/jpeg, image/png, image/webp",onDrop:n,maxFiles:1});return o("div",ee(W({},a()),{id:"upload-image-dropzone-wrapper",className:`${h?"drag-accept":""} ${d?"drag-reject":""}`,children:[e("input",W({},r())),u?h?e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}):e("p",{children:"not accepted format"}):e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}),i.length>0&&e("div",{className:"accepted-files mt-2",children:e("ul",{className:"list-unstyled",children:i.map(p=>o("li",{children:[p.name," (",Math.round(p.size/1024)," kb)"]},p.name))})}),e("div",{className:"py-5",children:s.progress!==null&&e(ne,{variant:"success",animated:!0,now:s.progress})})]}))},mt=()=>{const[t,s]=l.exports.useState(null),[n,a]=l.exports.useState(null);return{UploadReview:(i,u)=>{const h=q();i.folderimages===void 0;var d=new Date,p=d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();const c=z(H,"/revfolders/"+h);B(c,p).on("state_changed",m=>{},m=>{s(m)},async()=>{const m=await G(c);a(m);const y=j(R,"revalbums",p);await re(y,{created:V(),folderName:p,path:c.fullPath,url:m,_id:h,folderImages:i.folderimages,owner:i.owner})})},url:n,message:t}},ve=({query:t})=>{const s=$(),n=P(),{UploadReview:a}=mt(),[r,i]=l.exports.useState(!1),[u,h]=l.exports.useState(0),[d,p]=l.exports.useState([]),[c,m]=l.exports.useState([]),[y,v]=l.exports.useState([]),[w,T]=l.exports.useState("Create review album"),[J,ye]=l.exports.useState(null),xe=()=>{u==t.data[0].folderImages.length?(T("Thank you for the review"),a({owner:s.userid,folderimages:d})):ye("Please review all images before creating a review")},we=f=>{const S=d.filter(N=>N.path==f.path),C=c.filter(N=>N.path==f.path);if(!(S.includes(f)||C.includes(f))){const N=y.findIndex(k=>k.path==f.path);y.splice(N,1),f.className="likedstyle",d.push(f),h(d.length+c.length),console.log("b\xE5da",d.length+c.length),console.log("likedimages",d.length),console.log("dislikedimages",c.length),console.log("liked",d),console.log("dis",c)}},Ne=f=>{const S=d.filter(N=>N.path==f.path),C=c.filter(N=>N.path==f.path);if(!(S.includes(f)||C.includes(f))){const N=y.findIndex(k=>k.path==f.path);y.splice(N,1),f.className="dislikedstyle",c.push(f),h(d.length+c.length),console.log("liked",d),console.log("dis",c)}},be=f=>{if(!y.filter(C=>C.path==f.path).includes(f)&&!(!d.includes(f)&&!c.includes(f))){y.push(f);const C=d.findIndex(k=>k.path==f.path),N=c.findIndex(k=>k.path==f.path);console.log(C,N),C>=0&&d.splice(C,1),N>=0&&c.splice(N,1),f.className="neutralstyle",h(d.length+c.length),console.log("liked",d),console.log("dis",c)}};return console.log("all",u),o(b,{children:[o(te,{children:[o("div",{className:"text-center",children:[" ",e("h1",{children:"Images"})]}),t.data&&t.data[0].folderImages&&t.data[0].folderImages.length>=1&&e(F,{type:"submit",onClick:()=>i(!r),children:e("h2",{children:"Review Album"})}),e("div",{className:"img-grid",children:t.data&&t.data.map(f=>f.folderImages.map(S=>e("div",{className:S.className?S.className:"img-wrap",children:o(I,{children:["  ",e("img",{src:S.url,alt:"uploaded image"}),r&&o("div",{className:"rewiew-btns",children:[e(M,{className:"like-btn",onClick:()=>{be(S)},icon:Be}),e(M,{className:"like-btn",onClick:()=>{we(S)},icon:Ge}),e(M,{className:"dislike-btn",onClick:()=>{Ne(S)},icon:je})]})]})},S._id)))})]}),r&&o(I,{children:[" ",o("h3",{children:[u<=0?"0":u," / ",t.data?t.data[0].folderImages.length:"0"," "]}),e(F,{type:"submit",onClick:()=>{xe()},children:e("h2",{children:w})})]}),J&&o(D,{variant:"danger",children:[J,"  ",e(F,{onClick:()=>n("/myprofile"),children:e("h2",{children:"Redo review"})})," "]})]})},gt=(t={})=>{const[s,n]=l.exports.useState(t.FolderId),a=A(R,t.folderid),r=t.fetchAlbumImages?[s,t.foldername]:["images"],i=t.fetchAlbumImages?L(a,E("folderName","==",t.foldername)):L(a);return _(r,i,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},ft=()=>{const{onlineUser:t}=x(),s=$(),n=P(),[a,r]=l.exports.useState(!1),i=l.exports.useRef(),{updateTitle:u}=ge(),[h,d]=l.exports.useState(s.foldername),[p,c]=l.exports.useState("https://spontaneous-beijinho-8ddd64.netlify.app/#/folders/"+s.foldername+"/"+s.folderid+"/"+s.userid),m=gt({fetchAlbumImages:!0,foldername:s.foldername,folderid:s.userid});l.exports.useEffect(()=>{},[h]);const y=()=>{var w=document.getElementById("urlInput");w.select(),w.setSelectionRange(0,99999),navigator.clipboard.writeText(w.value)},v=w=>{w.preventDefault(),u(i.current.value),d(i.current.value),n("/folders/"+i.current.value+"/"+s.folderid+"/"+t.uid)};return o(I,{children:[o(b,{className:"singleFolder",children:[o("h3",{children:[" Folder ",h]}),o("h2",{children:["   ",e("span",{className:"spantext",children:"Url/Upload/NameChange? PRESS COG "}),e(M,{icon:le,onClick:()=>r(!a)})," "]})]}),t&&a&&o(b,{className:"foldername col-md-4 py-5",children:[e(fe,{folderid:s.folderid}),o("p",{children:["Share Folderurl:  ",e("input",{type:"text",value:p,id:"urlInput",readOnly:!0})," ",e(F,{onClick:y,children:"Copy text"})]}),e("h3",{children:"Change foldername:"}),o(g,{onSubmit:v,children:[e(g.Control,{type:"text",ref:i}),e(F,{type:"submit",children:e("h3",{children:"Submit"})})]})]}),e(ve,{query:m})]})},vt=(t={})=>{const[s,n]=l.exports.useState(t.folderid),a=A(R,"revalbums"),r=[s,t.foldername],i=L(a,E("folderName","==",t.foldername));return _(r,i,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},yt=()=>{const{onlineUser:t}=x(),s=$(),[n,a]=l.exports.useState(!1),r=l.exports.useRef(),{updateTitle:i}=ge(s.folderid),[u,h]=l.exports.useState(s.foldername),[d,p]=l.exports.useState("https://spontaneous-beijinho-8ddd64.netlify.app/#/revfolders/"+s.foldername+"/"+s.userid),c=vt({foldername:s.foldername,folderid:s.userid}),m=()=>{var v=document.getElementById("urlInput");v.select(),v.setSelectionRange(0,99999),navigator.clipboard.writeText(v.value)};return o(I,{children:[o(b,{className:"singleFolder",children:[o("h3",{children:[" Folder ",u]}),o("h2",{children:["   ",e("span",{className:"spantext",children:"Url/Upload/NameChange? PRESS COG "}),e(M,{icon:le,onClick:()=>a(!n)})," "]})]}),t&&n&&o(b,{className:"foldername col-md-4 py-5",children:[e("h2",{children:"Change foldername:"}),o(g,{onSubmit:v=>{v.preventDefault(),i(r.current.value),s.foldername!==r.current.value&&h(r.current.value)},children:[e(g.Control,{type:"text",ref:r}),e(F,{type:"submit",children:e("h3",{children:"Submit"})})]}),e(fe,{folderid:s.folderid}),o("p",{children:["Share Folderurl:  ",e("input",{type:"text",value:d,id:"urlInput",readOnly:!0})," ",e(F,{onClick:m,children:"Copy text"})]})]}),e(ve,{query:c})]})};function xt(){return o(I,{children:[e(st,{}),e("div",{className:"App",children:o($e,{children:[e(U,{path:"/",element:e(tt,{})}),e(U,{path:"/loginpage",element:e(nt,{})}),e(U,{path:"/login",element:e(pe,{})}),e(U,{path:"/signup",element:e(he,{})}),e(U,{path:"/logout",element:e(rt,{})}),e(U,{path:"/folders/:foldername/:folderid/:userid",element:e(ft,{})}),e(U,{path:"/revfolders/:foldername/:folderid/:userid",element:e(yt,{})}),e(U,{path:"/myprofile",element:e(de,{redirectTo:"/login",children:e(ct,{})})}),e(U,{path:"/uploadfolder",element:e(de,{redirectTo:"/login",children:e(pt,{})})})]})})]})}const wt=new Ke({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:1e3*60*2,cacheTime:1e3*60*60*4}}});He.render(e(We.StrictMode,{children:e(Ye,{client:wt,children:e(Ve,{children:e(et,{children:e(Je,{children:e(xt,{})})})})})}),document.getElementById("root"));
