var Ne=Object.defineProperty,Se=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var Z=(s,t,n)=>t in s?Ne(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,E=(s,t)=>{for(var n in t||(t={}))Re.call(t,n)&&Z(s,n,t[n]);if(X)for(var n of X(t))Ie.call(t,n)&&Z(s,n,t[n]);return s},ee=(s,t)=>Se(s,Fe(t));import{i as Ce,g as Ue,a as ke,S as Le,r as a,o as Pe,j as l,b as e,c as Ae,d as Te,s as De,e as Me,N as Ee,C as w,I as te,y as L,f as P,h as O,u as Q,F,k as Y,L as _,l as Oe,m as se,n as q,p as A,q as f,A as D,B as R,v as z,t as B,w as G,x as j,z as Qe,D as V,E as $,G as ne,H as K,J as _e,K as re,M as qe,O as ze,P as Be,Q as M,R as Ge,T as je,U as $e,V as ae,W as Ke,X as C,Y as He,Z as We,_ as Ye,$ as Ve,a0 as Je,a1 as Xe}from"./vendor.ebbad366.js";const Ze=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};Ze();const et={apiKey:"AIzaSyCNYDAxs-8T9B6_qIIf7Ox8A6gmmayq7kQ",authDomain:"firenote-25182.firebaseapp.com",projectId:"firenote-25182",storageBucket:"firenote-25182.appspot.com",messagingSenderId:"473871512660",appId:"1:473871512660:web:35225075fdc14847ad69c1"},le=Ce(et),H=Ue(),W=ke(le),S=Le(le),oe=a.exports.createContext(),x=()=>a.exports.useContext(oe),tt=({children:s})=>{const[t,n]=a.exports.useState(null),[o,r]=a.exports.useState(!0),i=async(p,d)=>Te(H,p,d),u=(p,d)=>De(H,p,d),m=(p,d)=>Me(H);a.exports.useEffect(()=>{Pe(H,p=>{n(p),r(!1)})},[]);const c={signup:i,signin:u,signout:m,onlineUser:t,loading:o};return l(oe.Provider,{value:c,children:[o&&e("div",{className:"d-flex justify-content-center vh-100 my-5 align-items-center",children:e(Ae.HashLoader,{color:"#222",size:40})}),!o&&s]})},ie=({children:s,redirectTo:t})=>{const{onlineUser:n}=x();return n?s:e(Ee,{to:t})},ce=({query:s})=>e(w,{children:s.data===void 0||s.data.length==1?e(w,{className:"text-center",children:"This folder does not contain any images, go to settings to upload"}):e(te,{children:e("div",{className:"img-grid",children:s.data&&s.data.map(t=>e("div",{className:t.className?t.className:"img-wrap",children:e("img",{src:t.url,alt:"uploaded image"})},t._id))})})}),de=(s={})=>{const{onlineUser:t}=x(),n=L(S,"images"),o=s.fetchUserImages?["images",t.uid]:["images"],r=s.fetchUserImages?P(n,O("owner","==",t.uid)):P(n);return Q(o,r,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},st=()=>{const{onlineUser:s}=x(),t=de();return l(F,{children:[e("div",{className:"text-center",children:s?e("p",{children:'Upload folders and images under "my profile" in menu '}):e("p",{children:"Sign up to upload images!"})}),e("div",{className:"text-center",children:e("h1",{children:"Latest from users"})}),e(ce,{query:t})]})},nt=()=>{const{onlineUser:s}=x();return e(Y,{variant:"light",expand:"md",children:l(w,{children:[l(_,{to:"/",className:"navbar-brand",children:[e("span",{role:"img"})," FireNote"]}),e(Y.Toggle,{"aria-controls":"basic-navbar-nav"}),e(Y.Collapse,{id:"basic-navbar-nav",children:e(Oe,{className:"ms-auto",children:s?e(F,{children:l(se,{title:s.email,id:"basic-nav-dropdown",children:[e(q,{to:"/myprofile",className:"nav-link",children:"My Profile"}),e(se.Divider,{}),e(q,{to:"/logout",className:"nav-link",children:" Logout"})]})}):l(F,{children:[e(q,{to:"/loginPage",className:"nav-link",children:"Login"}),e(q,{to:"/login",className:"nav-link"})]})})})]})})},ue=()=>{const s=a.exports.useRef(),t=a.exports.useRef(),n=A(),{signin:o}=x(),[r,i]=a.exports.useState(null),[u,m]=a.exports.useState(!0);return l(w,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Login"}),l(f,{onSubmit:async p=>{p.preventDefault(),i(null);try{m(!0),await o(s.current.value,t.current.value),n("/")}catch(d){i(d.message),m(!1)}},children:[r&&e(D,{variant:"danger",children:r}),l(f.Group,{id:"email",children:[e(f.Label,{children:"Email"}),e(f.Control,{type:"email",ref:s,placeholder:"Enter email",required:!0})]}),l(f.Group,{id:"Password",children:[e(f.Label,{children:"Password"}),e(f.Control,{type:"password",ref:t,placeholder:"Password",required:!0})]}),e(R,{className:"text-center",variant:"primary",type:"submit",children:"Sign In"})]}),l("div",{className:"text-center mt-3",children:["Need an account? ",e(_,{to:"/signup",children:"Sign Up"})]})]})},pe=()=>{const{signup:s}=x(),[t,n]=a.exports.useState(),o=a.exports.useRef(),r=a.exports.useRef(),i=a.exports.useRef(),[u,m]=a.exports.useState(null),c=A();return l(w,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Sign up"}),l(f,{onSubmit:async d=>{if(d.preventDefault(),r.current.value!==i.current.value)return m("The passwords does not match");m(null);try{n(!0),await s(o.current.value,r.current.value),c("/")}catch(h){m(h.message),n(!1)}},children:[u&&e(D,{variant:"danger",children:u}),l(f.Group,{id:"email",children:[e(f.Label,{children:"Email"}),e(f.Control,{ref:o,type:"email",placeholder:"Email",required:!0})]}),l(f.Group,{id:"password",children:[e(f.Label,{children:"Create a password"}),e(f.Control,{ref:r,type:"password",name:"password",placeholder:"Password",required:!0})]}),l(f.Group,{id:"password",children:[e(f.Label,{children:"Confirm password"}),e(f.Control,{ref:i,type:"password",placeholder:"Confirm Password",required:!0})]}),e(R,{disabled:t,className:"text-center",variant:"primary",type:"submit",children:"Submit"})]}),l("div",{className:"text-center mt-3",children:["Already a member? ",e(_,{to:"/login",children:"Log In"})]})]})},rt=()=>{const{onlineUser:s}=x();return e(F,{children:s?e(ue,{}):e(pe,{})})},at=()=>{const{signout:s}=x(),t=A();return a.exports.useEffect(async()=>{await s(),t("/")},[]),e(w,{className:"col-md-4 py-5",children:e("div",{className:"text-center",children:e("p",{children:" You're being signed out"})})})},lt=s=>{const[t,n]=a.exports.useState(0),[o,r]=a.exports.useState(null),[i,u]=a.exports.useState(null),{onlineUser:m}=x(),c=z();return a.exports.useEffect(()=>{const p=B(W,`${m.uid}/images/ ${s.name}`),d=L(S,"images");G(p,s).on("state_changed",h=>{n(Math.round(h.bytesTransferred/h.totalBytes*100))},h=>{r(h)},async()=>{const h=await j(p);u(h),await Qe(d,{created:V(),name:s.name,owner:m.uid,path:p.fullPath,size:s.size,type:s.type,url:h,_id:c})})},[s]),{progress:t,url:i,message:o}},ot=({file:s,setFile:t})=>{const{progress:n,url:o}=lt(s);return a.exports.useEffect(()=>{o&&t(null)},[o,t]),e(F,{children:n&&e("div",{className:n,style:{width:n},children:n})})},it=()=>{const[s,t]=a.exports.useState(null),[n,o]=a.exports.useState(null),r=i=>{let u=i.target.files[0];u&&u.type.includes("image")?(t(u),o({type:"success",msg:"File uploaded"})):(t(null),o({type:"warning",msg:"File must be an image"}))};return e("div",{className:"UploadForm",children:l(f,{children:[n&&e(D,{variant:n.type,children:n.msg}),e("h2",{children:"Upload Image"}),l("label",{children:[e("input",{type:"file",onChange:r}),e("span",{children:"+"})]}),e("div",{className:"output",children:s&&e(ot,{file:s,setFile:t})})]})})},he=(s={})=>{const{onlineUser:t}=x(),n=s.fetchReviewFolders?L(S,"revalbums"):L(S,t.uid),o=s.fetchReviewFolders?["revalbums"]:[t.uid],r=s.fetchReviewFolders?P(n,O("owner","==",t.uid)):P(n);return Q(o,r,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},ct=({query:s})=>{const t=A(),{onlineUser:n}=x();return l(w,{children:[l("div",{className:"text-center",children:[" ",e("h1",{children:"Folders"})," "]}),e("div",{className:"folder-grid",children:s.data&&s.data.map(o=>e("div",{className:"folder-wrap",onClick:()=>t("/folders/"+o.folderName+"/"+n.uid),children:l("h6",{children:["  ",o.folderName," "]})},o._id))})]})},dt=({query:s})=>{const t=A(),{onlineUser:n}=x();return l(w,{children:[l("div",{className:"text-center",children:[" ",e("h1",{children:"Reviews"})," "]}),e("div",{className:"folder-grid",children:s.data&&s.data.map(o=>e("div",{className:"folder-wrap",onClick:()=>t("/revfolders/"+o.folderName+"/"+n.uid),children:l("h6",{children:["  ",o.folderName," "]})},o._id))})]})},ut=()=>{const s=de({fetchUserImages:!0}),t=he(),n=he({fetchReviewFolders:!0});return e("div",{className:"myprofile",children:l(w,{className:"py-3",children:[e("h1",{children:"Profile"}),e(it,{}),l("div",{className:"text-center",children:[e("h2",{children:" Upload Folder"}),e(_,{to:"/uploadfolder",children:e("span",{className:"plus",children:"+"})})]}),e(ct,{query:t}),e(dt,{query:n}),e(ce,{query:s})]})})},pt=()=>{const[s,t]=a.exports.useState(0),[n,o]=a.exports.useState(null),{onlineUser:r}=x(),[i,u]=a.exports.useState(null);return{progress:s,UploadFolder:(c,p,d)=>{const h=z();p===void 0&&(p=[]),d===void 0&&(d=[]);const y=B(W,"folders/"+h);G(y,c,p).on("state_changed",g=>{t(Math.round(g.bytesTransferred/g.totalBytes*100))},g=>{o(g)},async()=>{const g=await j(y);u(g);const I=$(S,r.uid,c.name);await ne(I,{created:V(),folderName:c.name,path:y.fullPath,owner:r.uid,url:g,_id:h,folderCover:p.name,folderImages:d})})},url:i,message:n}},ht=()=>{const{UploadFolder:s}=pt(),t=a.exports.useRef(),n=a.exports.useRef(),[o,r]=a.exports.useState(!1),[i,u]=a.exports.useState(null),[m,c]=a.exports.useState(null),[p,d]=a.exports.useState(),h=()=>{const I=t.current.value;return d(I),p},y=I=>{let T=I.target.files[0];T&&T.type.includes("image")?u(T):(u(null),c({type:"warning",msg:"File must be an image"}))};return e(w,{children:l(f,{onSubmit:async I=>{I.preventDefault(),await s({name:t.current.value},i),c({type:"success",msg:"Folder uploaded, go to folder to upload images"})},children:[e("h1",{children:"Create new Folder"}),l(f.Group,{id:"folder",className:"mb-3",children:[e(f.Label,{children:"Foldername:"}),e(f.Control,{type:"text",ref:t,onChange:h}),e(f.Label,{children:"Upload cover: "}),e("input",{type:"file",ref:n,onChange:y})]}),e(R,{disabled:o,type:"submit",children:e("h4",{children:"Create Folder"})}),m&&e(D,{variant:m.type,children:m.msg})]})})},me=()=>{const s=K(),[t,n]=a.exports.useState(s.userid),o=L(S,t);return{updateTitle:async(i,u)=>{const m=await _e(o);let c=[];m.forEach(h=>{c.push(E({id:h.id,name:h.name},h.data()))});const p=c.find(h=>h.folderName===i),d=$(S,t,p.id);re(d,{folderName:u})}}},mt=()=>{const[s,t]=a.exports.useState(0),[n,o]=a.exports.useState(null),[r,i]=a.exports.useState(null),{onlineUser:u}=x();return{progress:s,url:r,message:n,uploadImage:async(c,p)=>{if(!c||c==null)return;const d=z(),h=B(W,`${u.uid}/${p}/${c.name}`),y=$(S,u.uid,p);G(h,c).on("state_changed",g=>{t(Math.round(g.bytesTransferred/g.totalBytes*100))},g=>{o(g)},async()=>{const g=await j(h);i(g),await re(y,{folderImages:qe({name:c.name,owner:u.uid,path:h.fullPath,size:c.size,type:c.type,url:g,_id:d})}),t(null)})}}},ge=s=>{const t=mt(),n=a.exports.useCallback(p=>{!p.length||p.forEach(d=>{t.uploadImage(d,s.albumname)})},[]),{getRootProps:o,getInputProps:r,acceptedFiles:i,isDragActive:u,isDragAccept:m,isDragReject:c}=ze({accept:"image/gif, image/jpeg, image/png, image/webp",onDrop:n,maxFiles:1});return l("div",ee(E({},o()),{id:"upload-image-dropzone-wrapper",className:`${m?"drag-accept":""} ${c?"drag-reject":""}`,children:[e("input",E({},r())),u?m?e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}):e("p",{children:"not accepted format"}):e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}),i.length>0&&e("div",{className:"accepted-files mt-2",children:e("ul",{className:"list-unstyled",children:i.map(p=>l("li",{children:[p.name," (",Math.round(p.size/1024)," kb)"]},p.name))})}),e("div",{className:"py-5",children:t.progress!==null&&e(Be,{variant:"success",animated:!0,now:t.progress})})]}))},gt=()=>{const[s,t]=a.exports.useState(null),[n,o]=a.exports.useState(null);return{UploadReview:(i,u)=>{const m=z();i.folderimages===void 0;var c=new Date,p=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();const d=B(W,"/revfolders/"+m);G(d,p).on("state_changed",h=>{},h=>{t(h)},async()=>{const h=await j(d);o(h);const y=$(S,"revalbums",p);await ne(y,{created:V(),folderName:p,path:d.fullPath,url:h,_id:m,folderImages:i.folderimages,owner:i.owner})})},url:n,message:s}},fe=({query:s})=>{const t=K(),n=A(),{UploadReview:o}=gt(),[r,i]=a.exports.useState(!1),[u,m]=a.exports.useState([]),[c,p]=a.exports.useState([]),[d,h]=a.exports.useState([]),[y,g]=a.exports.useState([]),[I,T]=a.exports.useState("Create review album"),[J,ve]=a.exports.useState(null),ye=()=>{u==s.data[0].folderImages.length?(T("Thank you for the review"),o({owner:t.userid,folderimages:c})):ve("Please review all images before creating a review")},xe=v=>{const N=c.filter(b=>b.path==v.path),U=d.filter(b=>b.path==v.path);if(!(N.includes(v)||U.includes(v))){const b=y.findIndex(k=>k.path==v.path);y.splice(b,1),v.className="likedstyle",c.push(v),m(c.length+d.length)}},we=v=>{const N=c.filter(b=>b.path==v.path),U=d.filter(b=>b.path==v.path);if(!(N.includes(v)||U.includes(v))){const b=y.findIndex(k=>k.path==v.path);y.splice(b,1),v.className="dislikedstyle",d.push(v),m(c.length+d.length)}},be=v=>{if(!y.filter(U=>U.path==v.path).includes(v)&&!(!c.includes(v)&&!d.includes(v))){y.push(v);const U=c.findIndex(k=>k.path==v.path),b=d.findIndex(k=>k.path==v.path);c.splice(U,1),d.splice(b,1),v.className="neutralstyle",m(c.length+d.length)}};return l(w,{children:[l(te,{children:[l("div",{className:"text-center",children:[" ",e("h1",{children:"Images"})]}),e(R,{type:"submit",onClick:()=>i(!r),children:e("h2",{children:"Review Album"})}),e("div",{className:"img-grid",children:s.data&&s.data.map(v=>v.folderImages.map(N=>e("div",{className:N.className?N.className:"img-wrap",children:l(F,{children:["  ",e("img",{src:N.url,alt:"uploaded image"}),r&&l("div",{className:"rewiew-btns",children:[e(M,{className:"like-btn",onClick:()=>{be(N)},icon:Ge}),e(M,{className:"like-btn",onClick:()=>{xe(N)},icon:je}),e(M,{className:"dislike-btn",onClick:()=>{we(N)},icon:$e})]})]})},N._id)))})]}),r&&l(F,{children:[" ",l("h3",{children:[u<=0?"0":u," / ",s.data?s.data[0].folderImages.length:"0"," "]}),e(R,{type:"submit",onClick:()=>{ye()},children:e("h2",{children:I})})]}),J&&l(D,{variant:"danger",children:[J,"  ",e(R,{onClick:()=>n("/myprofile"),children:e("h2",{children:"Redo review"})})," "]})]})},ft=(s={})=>{const[t,n]=a.exports.useState(s.FolderId),o=L(S,s.folderid),r=s.fetchAlbumImages?[t,s.foldername]:["images"],i=s.fetchAlbumImages?P(o,O("folderName","==",s.foldername)):P(o);return Q(r,i,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},vt=()=>{const{onlineUser:s}=x(),t=K(),[n,o]=a.exports.useState(!1),r=a.exports.useRef(),{updateTitle:i}=me(t.foldername),[u,m]=a.exports.useState(t.foldername),[c,p]=a.exports.useState("https://spontaneous-beijinho-8ddd64.netlify.app/#/folders/"+t.foldername+"/"+t.userid),d=ft({fetchAlbumImages:!0,foldername:t.foldername,folderid:t.userid}),h=()=>{var g=document.getElementById("urlInput");g.select(),g.setSelectionRange(0,99999),navigator.clipboard.writeText(g.value)},y=g=>{g.preventDefault(),i(t.foldername,r.current.value),t.foldername!==r.current.value&&m(r.current.value)};return l(F,{children:[l(w,{className:"singleFolder",children:[l("h3",{children:[" Folder ",u]}),l("h2",{children:["   ",e("span",{className:"spantext",children:"Url/Upload/NameChange? PRESS COG "}),e(M,{icon:ae,onClick:()=>o(!n)})," "]})]}),s&&n&&l(w,{className:"foldername col-md-4 py-5",children:[e(ge,{albumname:t.foldername}),l("p",{children:["Share Folderurl:  ",e("input",{type:"text",value:c,id:"urlInput",readOnly:!0})," ",e(R,{onClick:h,children:"Copy text"})]}),e("h3",{children:"Change foldername:"}),l(f,{onSubmit:y,children:[e(f.Control,{type:"text",ref:r}),e(R,{type:"submit",children:e("h3",{children:"Submit"})})]})]}),e(fe,{query:d})]})},yt=(s={})=>{const[t,n]=a.exports.useState(s.folderid),o=L(S,"revalbums"),r=[t,s.foldername],i=P(o,O("folderName","==",s.foldername));return Q(r,i,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},xt=()=>{const{onlineUser:s}=x(),t=K(),[n,o]=a.exports.useState(!1),r=a.exports.useRef(),{updateTitle:i}=me(t.foldername),[u,m]=a.exports.useState(t.foldername),[c,p]=a.exports.useState("https://spontaneous-beijinho-8ddd64.netlify.app/#/revfolders/"+t.foldername+"/"+t.userid),d=yt({foldername:t.foldername,folderid:t.userid}),h=()=>{var g=document.getElementById("urlInput");g.select(),g.setSelectionRange(0,99999),navigator.clipboard.writeText(g.value)};return l(F,{children:[l(w,{className:"singleFolder",children:[l("h3",{children:[" Folder ",u]}),l("h2",{children:["   ",e("span",{className:"spantext",children:"Url/Upload/NameChange? PRESS COG "}),e(M,{icon:ae,onClick:()=>o(!n)})," "]})]}),s&&n&&l(w,{className:"foldername col-md-4 py-5",children:[e("h2",{children:"Change foldername:"}),l(f,{onSubmit:g=>{g.preventDefault(),i(t.foldername,r.current.value),t.foldername!==r.current.value&&m(r.current.value)},children:[e(f.Control,{type:"text",ref:r}),e(R,{type:"submit",children:e("h3",{children:"Submit"})})]}),e(ge,{albumname:t.foldername}),l("p",{children:["Share Folderurl:  ",e("input",{type:"text",value:c,id:"urlInput",readOnly:!0})," ",e(R,{onClick:h,children:"Copy text"})]})]}),e(fe,{query:d})]})};function wt(){return l(F,{children:[e(nt,{}),e("div",{className:"App",children:l(Ke,{children:[e(C,{path:"/",element:e(st,{})}),e(C,{path:"/loginpage",element:e(rt,{})}),e(C,{path:"/login",element:e(ue,{})}),e(C,{path:"/signup",element:e(pe,{})}),e(C,{path:"/logout",element:e(at,{})}),e(C,{path:"/folders/:foldername/:userid",element:e(vt,{})}),e(C,{path:"/revfolders/:foldername/:userid",element:e(xt,{})}),e(C,{path:"/myprofile",element:e(ie,{redirectTo:"/login",children:e(ut,{})})}),e(C,{path:"/uploadfolder",element:e(ie,{redirectTo:"/login",children:e(ht,{})})})]})})]})}const bt=new He({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:1e3*60*2,cacheTime:1e3*60*60*4}}});We.render(e(Ye.StrictMode,{children:e(Ve,{client:bt,children:e(Je,{children:e(tt,{children:e(Xe,{children:e(wt,{})})})})})}),document.getElementById("root"));
