var ge=Object.defineProperty,fe=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var V=(t,s,n)=>s in t?ge(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,D=(t,s)=>{for(var n in s||(s={}))ve.call(s,n)&&V(t,n,s[n]);if(Y)for(var n of Y(s))xe.call(s,n)&&V(t,n,s[n]);return t},J=(t,s)=>fe(t,ye(s));import{i as we,g as be,a as Ne,S as Se,r as l,o as Fe,j as c,b as e,c as Re,d as Ie,s as Ce,e as Ue,N as ke,C as b,I as X,y as L,f as A,h as Z,u as $,F,k as K,L as T,l as Le,m as ee,n as M,p as E,q as f,A as O,B as U,v as _,t as q,w as Q,x as z,z as te,D as H,E as W,G as Pe,H as se,J as Ae,K as ne,M as De,O as Te,P as Me,Q as B,R as Ee,T as Oe,U as _e,V as qe,W as Qe,X as R,Y as ze,Z as Be,_ as Ge,$ as je,a0 as $e,a1 as Ke}from"./vendor.54c8837a.js";const He=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};He();const We={apiKey:"AIzaSyCNYDAxs-8T9B6_qIIf7Ox8A6gmmayq7kQ",authDomain:"firenote-25182.firebaseapp.com",projectId:"firenote-25182",storageBucket:"firenote-25182.appspot.com",messagingSenderId:"473871512660",appId:"1:473871512660:web:35225075fdc14847ad69c1"},re=we(We),G=be(),j=Ne(re),I=Se(re),ae=l.exports.createContext(),v=()=>l.exports.useContext(ae),Ye=({children:t})=>{const[s,n]=l.exports.useState(null),[o,r]=l.exports.useState(!0),i=async(d,p)=>Ie(G,d,p),a=(d,p)=>Ce(G,d,p),m=(d,p)=>Ue(G);l.exports.useEffect(()=>{Fe(G,d=>{n(d),r(!1)})},[]);const u={signup:i,signin:a,signout:m,onlineUser:s,loading:o};return c(ae.Provider,{value:u,children:[o&&e("div",{className:"d-flex justify-content-center vh-100 my-5 align-items-center",children:e(Re.HashLoader,{color:"#222",size:40})}),!o&&t]})},le=({children:t,redirectTo:s})=>{const{onlineUser:n}=v();return n?t:e(ke,{to:s})},oe=({query:t})=>e(b,{children:t.data===void 0||t.data.length==1?e(b,{className:"text-center",children:"This folder does not contain any images, go to settings to upload"}):e(X,{children:e("div",{className:"img-grid",children:t.data&&t.data.map(s=>e("div",{className:s.className?s.className:"img-wrap",children:e("img",{src:s.url,alt:"uploaded image"})},s._id))})})}),ie=(t={})=>{const{onlineUser:s}=v(),n=L(I,"images"),o=t.fetchUserImages?["images",s.uid]:["images"],r=t.fetchUserImages?A(n,Z("owner","==",s.uid)):A(n);return $(o,r,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},Ve=()=>{const{onlineUser:t}=v(),s=ie();return c(F,{children:[e("div",{className:"text-center",children:t?e("p",{children:'Upload folders and images under "my profile" in menu '}):e("p",{children:"Sign up to upload images!"})}),e("div",{className:"text-center",children:e("h1",{children:"Latest from users"})}),e(oe,{query:s})]})},Je=()=>{const{onlineUser:t}=v();return e(K,{variant:"light",expand:"md",children:c(b,{children:[c(T,{to:"/",className:"navbar-brand",children:[e("span",{role:"img"})," FireNote"]}),e(K.Toggle,{"aria-controls":"basic-navbar-nav"}),e(K.Collapse,{id:"basic-navbar-nav",children:e(Le,{className:"ms-auto",children:t?e(F,{children:c(ee,{title:t.email,id:"basic-nav-dropdown",children:[e(M,{to:"/myprofile",className:"nav-link",children:"My Profile"}),e(ee.Divider,{}),e(M,{to:"/logout",className:"nav-link",children:" Logout"})]})}):c(F,{children:[e(M,{to:"/loginPage",className:"nav-link",children:"Login"}),e(M,{to:"/login",className:"nav-link"})]})})})]})})},ce=()=>{const t=l.exports.useRef(),s=l.exports.useRef(),n=E(),{signin:o}=v(),[r,i]=l.exports.useState(null),[a,m]=l.exports.useState(!0);return c(b,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Login"}),c(f,{onSubmit:async d=>{d.preventDefault(),i(null);try{m(!0),await o(t.current.value,s.current.value),n("/")}catch(p){i(p.message),m(!1)}},children:[r&&e(O,{variant:"danger",children:r}),c(f.Group,{id:"email",children:[e(f.Label,{children:"Email"}),e(f.Control,{type:"email",ref:t,placeholder:"Enter email",required:!0})]}),c(f.Group,{id:"Password",children:[e(f.Label,{children:"Password"}),e(f.Control,{type:"password",ref:s,placeholder:"Password",required:!0})]}),e(U,{className:"text-center",variant:"primary",type:"submit",children:"Sign In"})]}),c("div",{className:"text-center mt-3",children:["Need an account? ",e(T,{to:"/signup",children:"Sign Up"})]})]})},de=()=>{const{signup:t}=v(),[s,n]=l.exports.useState(),o=l.exports.useRef(),r=l.exports.useRef(),i=l.exports.useRef(),[a,m]=l.exports.useState(null),u=E();return c(b,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Sign up"}),c(f,{onSubmit:async p=>{if(p.preventDefault(),r.current.value!==i.current.value)return m("The passwords does not match");m(null);try{n(!0),await t(o.current.value,r.current.value),u("/")}catch(h){m(h.message),n(!1)}},children:[a&&e(O,{variant:"danger",children:a}),c(f.Group,{id:"email",children:[e(f.Label,{children:"Email"}),e(f.Control,{ref:o,type:"email",placeholder:"Email",required:!0})]}),c(f.Group,{id:"password",children:[e(f.Label,{children:"Create a password"}),e(f.Control,{ref:r,type:"password",name:"password",placeholder:"Password",required:!0})]}),c(f.Group,{id:"password",children:[e(f.Label,{children:"Confirm password"}),e(f.Control,{ref:i,type:"password",placeholder:"Confirm Password",required:!0})]}),e(U,{disabled:s,className:"text-center",variant:"primary",type:"submit",children:"Submit"})]}),c("div",{className:"text-center mt-3",children:["Already a member? ",e(T,{to:"/login",children:"Log In"})]})]})},Xe=()=>{const{onlineUser:t}=v();return e(F,{children:t?e(ce,{}):e(de,{})})},Ze=()=>{const{signout:t}=v(),s=E();return l.exports.useEffect(async()=>{await t(),s("/")},[]),e(b,{className:"col-md-4 py-5",children:e("div",{className:"text-center",children:e("p",{children:" You're being signed out"})})})},et=t=>{const[s,n]=l.exports.useState(0),[o,r]=l.exports.useState(null),[i,a]=l.exports.useState(null),{onlineUser:m}=v(),u=_();return l.exports.useEffect(()=>{const d=q(j,`${m.uid}/images/ ${t.name}`),p=L(I,"images");Q(d,t).on("state_changed",h=>{n(Math.round(h.bytesTransferred/h.totalBytes*100))},h=>{r(h)},async()=>{const h=await z(d);a(h),await te(p,{created:H(),name:t.name,owner:m.uid,path:d.fullPath,size:t.size,type:t.type,url:h,_id:u})})},[t]),{progress:s,url:i,message:o}},tt=({file:t,setFile:s})=>{const{progress:n,url:o}=et(t);return l.exports.useEffect(()=>{o&&s(null)},[o,s]),e(F,{children:n&&e("div",{className:n,style:{width:n},children:n})})},st=()=>{const[t,s]=l.exports.useState(null),[n,o]=l.exports.useState(null),r=i=>{let a=i.target.files[0];a&&a.type.includes("image")?(s(a),o({type:"success",msg:"File uploaded"})):(s(null),o({type:"warning",msg:"File must be an image"}))};return e("div",{className:"UploadForm",children:c(f,{children:[n&&e(O,{variant:n.type,children:n.msg}),e("h2",{children:"Upload Image"}),c("label",{children:[e("input",{type:"file",onChange:r}),e("span",{children:"+"})]}),e("div",{className:"output",children:t&&e(tt,{file:t,setFile:s})})]})})},nt=(t={})=>{const{onlineUser:s}=v(),n=t.fetchReviewFolders?L(I,"reviewalbums"):L(I,s.uid),o=t.fetchReviewFolders?["reviewalbums"]:[s.uid],r=A(n);return $(o,r,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},rt=({query:t})=>{const s=E(),{onlineUser:n}=v();return c(b,{children:[c("div",{className:"text-center",children:[" ",e("h1",{children:"Folders"})," "]}),e("div",{className:"folder-grid",children:t.data&&t.data.map(o=>e("div",{className:"folder-wrap",onClick:()=>s("/folders/"+o.folderName+"/"+n.uid),children:c("h6",{children:["  ",o.folderName," "]})},o._id))})]})},at=()=>{const t=ie({fetchUserImages:!0}),s=nt();return e("div",{className:"myprofile",children:c(b,{className:"py-3",children:[e("h1",{children:"Profile"}),e(st,{}),c("div",{className:"text-center",children:[e("h2",{children:" Upload Folder"}),e(T,{to:"/uploadfolder",children:e("span",{className:"plus",children:"+"})})]}),e(rt,{query:s}),e(oe,{query:t})]})})},lt=()=>{const[t,s]=l.exports.useState(0),[n,o]=l.exports.useState(null),{onlineUser:r}=v(),[i,a]=l.exports.useState(null);return{progress:t,UploadFolder:(u,d,p)=>{const h=_();d===void 0&&(d=[]),p===void 0&&(p=[]);const x=q(j,"folders/"+h);Q(x,u,d).on("state_changed",g=>{s(Math.round(g.bytesTransferred/g.totalBytes*100))},g=>{o(g)},async()=>{const g=await z(x);a(g);const N=W(I,r.uid,u.name);await Pe(N,{created:H(),folderName:u.name,path:x.fullPath,owner:r.uid,url:g,_id:h,folderCover:d.name,folderImages:p})})},url:i,message:n}},ot=()=>{const{UploadFolder:t}=lt(),s=l.exports.useRef(),n=l.exports.useRef(),[o,r]=l.exports.useState(!1),[i,a]=l.exports.useState(null),[m,u]=l.exports.useState(null),[d,p]=l.exports.useState(),h=()=>{const N=s.current.value;return p(N),d},x=N=>{let P=N.target.files[0];P&&P.type.includes("image")?a(P):(a(null),u({type:"warning",msg:"File must be an image"}))};return e(b,{children:c(f,{onSubmit:async N=>{N.preventDefault(),await t({name:s.current.value},i),u({type:"success",msg:"Folder uploaded, go to folder to upload images"})},children:[e("h1",{children:"Create new Folder"}),c(f.Group,{id:"folder",className:"mb-3",children:[e(f.Label,{children:"Foldername:"}),e(f.Control,{type:"text",ref:s,onChange:h}),e(f.Label,{children:"Upload cover: "}),e("input",{type:"file",ref:n,onChange:x})]}),e(U,{disabled:o,type:"submit",children:e("h4",{children:"Create Folder"})}),m&&e(O,{variant:m.type,children:m.msg})]})})},it=()=>{const t=se();console.log(t);const[s,n]=l.exports.useState(t.userid);return{updateTitle:(r,i)=>{l.exports.useEffect(()=>{const a=Ae(colFoldersRef);let m=[];const u=a.forEach(h=>{m.push(D({id:h.id,name:h.name},h.data()))}),d=m.find(h=>h.folderName===r),p=W(I,s,d.id);return ne(p,{folderName:i}),()=>{u()}},[])}}},ct=()=>{const[t,s]=l.exports.useState(0),[n,o]=l.exports.useState(null),[r,i]=l.exports.useState(null),{onlineUser:a}=v();return{progress:t,url:r,message:n,uploadImage:async(u,d)=>{if(!u||u==null)return;const p=_(),h=q(j,`${a.uid}/${d}/${u.name}`),x=W(I,a.uid,d);Q(h,u).on("state_changed",g=>{s(Math.round(g.bytesTransferred/g.totalBytes*100))},g=>{o(g)},async()=>{const g=await z(h);i(g),await ne(x,{folderImages:De({name:u.name,owner:a.uid,path:h.fullPath,size:u.size,type:u.type,url:g,_id:p})}),s(null)})}}},dt=t=>{const s=ct(),n=l.exports.useCallback(d=>{!d.length||d.forEach(p=>{s.uploadImage(p,t.albumname)})},[]),{getRootProps:o,getInputProps:r,acceptedFiles:i,isDragActive:a,isDragAccept:m,isDragReject:u}=Te({accept:"image/gif, image/jpeg, image/png, image/webp",onDrop:n,maxFiles:1});return c("div",J(D({},o()),{id:"upload-image-dropzone-wrapper",className:`${m?"drag-accept":""} ${u?"drag-reject":""}`,children:[e("input",D({},r())),a?m?e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}):e("p",{children:"not accepted format"}):e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}),i.length>0&&e("div",{className:"accepted-files mt-2",children:e("ul",{className:"list-unstyled",children:i.map(d=>c("li",{children:[d.name," (",Math.round(d.size/1024)," kb)"]},d.name))})}),e("div",{className:"py-5",children:s.progress!==null&&e(Me,{variant:"success",animated:!0,now:s.progress})})]}))},ut=()=>{const[t,s]=l.exports.useState(null),{onlineUser:n}=v(),[o,r]=l.exports.useState(null);return{UploadReview:(a,m)=>{const u=_();a.folderimages===void 0;const d=q(j,"/revfolders/"+u);Q(d,a).on("state_changed",p=>{},p=>{s(p)},async()=>{const p=await z(d);r(p);const h=L(I,n.uid);var x=new Date,g=x.getHours()+":"+x.getMinutes()+":"+x.getSeconds();await te(h,{created:H(),folderName:g,path:d.fullPath,url:p,_id:u,folderImages:a.folderimages})})},url:o,message:t}},pt=({query:t})=>{const{UploadReview:s}=ut(),[n,o]=l.exports.useState(!1),[r,i]=l.exports.useState([]),[a,m]=l.exports.useState([]),[u,d]=l.exports.useState([]),[p,h]=l.exports.useState("Create review album"),x=()=>{h("Go to profile to view new album"),s({folderimages:a})},g=y=>{const w=a.filter(S=>S.path==y.path),k=u.filter(S=>S.path==y.path);w.length||k.length||(y.className="likedstyle",a.push(y),i(a.length+u.length))},N=y=>{const w=a.filter(S=>S.path==y.path),k=u.filter(S=>S.path==y.path);w.length||k.length||(y.className="dislikedstyle",u.push(y),i(a.length+u.length))},P=y=>{const w=a.filter(C=>C.path!==y.path),k=u.filter(C=>C.path!==y.path);w.length&&m(w),k.length&&d(k);const S=a.filter(C=>C.path==y.path),pe=a.filter(C=>C.path==y.path),he=a.indexOf(S),me=a.indexOf(pe);a.splice(he,1),a.splice(me,1),y.className="neutralstyle",i(a.length+u.length)};return c(b,{children:[c(X,{children:[c("div",{className:"text-center",children:[" ",e("h1",{children:"Images"})]}),e(U,{type:"submit",onClick:()=>o(!n),children:e("h2",{children:"Review Album"})}),e("div",{className:"img-grid",children:t.data&&t.data.map(y=>y.folderImages.map(w=>e("div",{className:w.className?w.className:"img-wrap",children:c(F,{children:["  ",e("img",{src:w.url,alt:"uploaded image"}),n&&c("div",{className:"rewiew-btns",children:[e(B,{className:"like-btn",onClick:()=>{P(w)},icon:Ee}),e(B,{className:"like-btn",onClick:()=>{g(w)},icon:Oe}),e(B,{className:"dislike-btn",onClick:()=>{N(w)},icon:_e})]})]})},w._id)))})]}),n&&c(F,{children:[" ",c("h3",{children:[r<=0?"0":r," / ",t.data?t.data[0].folderImages.length:"0"," "]}),e(U,{type:"submit",onClick:()=>{x()},children:e("h2",{children:p})})]})]})},ht=(t={})=>{v(),console.log(t);const[s,n]=l.exports.useState(t.FolderId),o=L(I,t.folderid),r=t.fetchAlbumImages?[s,t.foldername]:["images"],i=t.fetchAlbumImages?A(o,Z("folderName","==",t.foldername)):A(o);return $(r,i,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},ue=()=>{const{onlineUser:t}=v(),s=se(),[n,o]=l.exports.useState(!1),r=l.exports.useRef(),{updateTitle:i}=it(s.foldername),[a,m]=l.exports.useState(s.foldername),[u,d]=l.exports.useState("https://spontaneous-beijinho-8ddd64.netlify.app/#/folders/"+s.foldername+"/"+s.userid),p=ht({fetchAlbumImages:!0,foldername:s.foldername,folderid:s.userid}),h=()=>{var g=document.getElementById("urlInput");g.select(),g.setSelectionRange(0,99999),navigator.clipboard.writeText(g.value)};return c(F,{children:[c(b,{className:"singleFolder",children:[c("h3",{children:[" Folder ",a]}),c("h2",{children:["   ",e("span",{className:"spantext",children:"Url/Upload/NameChange? PRESS COG "}),e(B,{icon:qe,onClick:()=>o(!n)})," "]})]}),t&&n&&c(b,{className:"foldername col-md-4 py-5",children:[e("h2",{children:"Change foldername:"}),c(f,{onSubmit:g=>{g.preventDefault(),i(s.foldername,r.current.value),s.foldername!==r.current.value&&m(r.current.value)},children:[e(f.Control,{type:"text",ref:r}),e(U,{type:"submit",children:e("h3",{children:"Submit"})})]}),e(dt,{albumname:s.foldername}),c("p",{children:["Share Folderurl:  ",e("input",{type:"text",value:u,id:"urlInput",readOnly:!0})," ",e(U,{onClick:h,children:"Copy text"})]})]}),e(pt,{query:p})]})};function mt(){return c(F,{children:[e(Je,{}),e("div",{className:"App",children:c(Qe,{children:[e(R,{path:"/",element:e(Ve,{})}),e(R,{path:"/loginpage",element:e(Xe,{})}),e(R,{path:"/login",element:e(ce,{})}),e(R,{path:"/signup",element:e(de,{})}),e(R,{path:"/logout",element:e(Ze,{})}),e(R,{path:"/folders/:foldername/:userid",element:e(ue,{})}),e(R,{path:"/revfolders/:foldername/:userid",element:e(ue,{})}),e(R,{path:"/myprofile",element:e(le,{redirectTo:"/login",children:e(at,{})})}),e(R,{path:"/uploadfolder",element:e(le,{redirectTo:"/login",children:e(ot,{})})})]})})]})}const gt=new ze({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:1e3*60*2,cacheTime:1e3*60*60*4}}});Be.render(e(Ge.StrictMode,{children:e(je,{client:gt,children:e($e,{children:e(Ye,{children:e(Ke,{children:e(mt,{})})})})})}),document.getElementById("root"));
