var ge=Object.defineProperty,fe=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var V=(s,t,n)=>t in s?ge(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,D=(s,t)=>{for(var n in t||(t={}))ve.call(t,n)&&V(s,n,t[n]);if(Y)for(var n of Y(t))xe.call(t,n)&&V(s,n,t[n]);return s},J=(s,t)=>fe(s,ye(t));import{i as we,g as be,a as Ne,S as Se,r as l,o as Fe,j as c,b as e,c as Re,d as Ie,s as Ce,e as Ue,N as ke,C as b,I as X,y as U,f as A,h as Z,u as $,F as R,k as K,L as T,l as Le,m as ee,n as M,p as E,q as f,A as O,B as k,v as _,t as q,w as Q,x as z,z as te,D as H,E as W,G as Pe,H as se,J as Ae,K as ne,M as De,O as Te,P as Me,Q as B,R as Ee,T as Oe,U as _e,V as qe,W as Qe,X as I,Y as ze,Z as Be,_ as Ge,$ as je,a0 as $e,a1 as Ke}from"./vendor.ebbad366.js";const He=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};He();const We={apiKey:"AIzaSyCNYDAxs-8T9B6_qIIf7Ox8A6gmmayq7kQ",authDomain:"firenote-25182.firebaseapp.com",projectId:"firenote-25182",storageBucket:"firenote-25182.appspot.com",messagingSenderId:"473871512660",appId:"1:473871512660:web:35225075fdc14847ad69c1"},ae=we(We),G=be(),j=Ne(ae),N=Se(ae),re=l.exports.createContext(),v=()=>l.exports.useContext(re),Ye=({children:s})=>{const[t,n]=l.exports.useState(null),[o,a]=l.exports.useState(!0),i=async(u,p)=>Ie(G,u,p),r=(u,p)=>Ce(G,u,p),m=(u,p)=>Ue(G);l.exports.useEffect(()=>{Fe(G,u=>{n(u),a(!1)})},[]);const d={signup:i,signin:r,signout:m,onlineUser:t,loading:o};return c(re.Provider,{value:d,children:[o&&e("div",{className:"d-flex justify-content-center vh-100 my-5 align-items-center",children:e(Re.HashLoader,{color:"#222",size:40})}),!o&&s]})},le=({children:s,redirectTo:t})=>{const{onlineUser:n}=v();return n?s:e(ke,{to:t})},oe=({query:s})=>e(b,{children:s.data===void 0||s.data.length==1?e(b,{className:"text-center",children:"This folder does not contain any images, go to settings to upload"}):e(X,{children:e("div",{className:"img-grid",children:s.data&&s.data.map(t=>e("div",{className:t.className?t.className:"img-wrap",children:e("img",{src:t.url,alt:"uploaded image"})},t._id))})})}),ie=(s={})=>{const{onlineUser:t}=v(),n=U(N,"images"),o=s.fetchUserImages?["images",t.uid]:["images"],a=s.fetchUserImages?A(n,Z("owner","==",t.uid)):A(n);return $(o,a,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},Ve=()=>{const{onlineUser:s}=v(),t=ie();return c(R,{children:[e("div",{className:"text-center",children:s?e("p",{children:'Upload folders and images under "my profile" in menu '}):e("p",{children:"Sign up to upload images!"})}),e("div",{className:"text-center",children:e("h1",{children:"Latest from users"})}),e(oe,{query:t})]})},Je=()=>{const{onlineUser:s}=v();return e(K,{variant:"light",expand:"md",children:c(b,{children:[c(T,{to:"/",className:"navbar-brand",children:[e("span",{role:"img"})," FireNote"]}),e(K.Toggle,{"aria-controls":"basic-navbar-nav"}),e(K.Collapse,{id:"basic-navbar-nav",children:e(Le,{className:"ms-auto",children:s?e(R,{children:c(ee,{title:s.email,id:"basic-nav-dropdown",children:[e(M,{to:"/myprofile",className:"nav-link",children:"My Profile"}),e(ee.Divider,{}),e(M,{to:"/logout",className:"nav-link",children:" Logout"})]})}):c(R,{children:[e(M,{to:"/loginPage",className:"nav-link",children:"Login"}),e(M,{to:"/login",className:"nav-link"})]})})})]})})},ce=()=>{const s=l.exports.useRef(),t=l.exports.useRef(),n=E(),{signin:o}=v(),[a,i]=l.exports.useState(null),[r,m]=l.exports.useState(!0);return c(b,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Login"}),c(f,{onSubmit:async u=>{u.preventDefault(),i(null);try{m(!0),await o(s.current.value,t.current.value),n("/")}catch(p){i(p.message),m(!1)}},children:[a&&e(O,{variant:"danger",children:a}),c(f.Group,{id:"email",children:[e(f.Label,{children:"Email"}),e(f.Control,{type:"email",ref:s,placeholder:"Enter email",required:!0})]}),c(f.Group,{id:"Password",children:[e(f.Label,{children:"Password"}),e(f.Control,{type:"password",ref:t,placeholder:"Password",required:!0})]}),e(k,{className:"text-center",variant:"primary",type:"submit",children:"Sign In"})]}),c("div",{className:"text-center mt-3",children:["Need an account? ",e(T,{to:"/signup",children:"Sign Up"})]})]})},de=()=>{const{signup:s}=v(),[t,n]=l.exports.useState(),o=l.exports.useRef(),a=l.exports.useRef(),i=l.exports.useRef(),[r,m]=l.exports.useState(null),d=E();return c(b,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Sign up"}),c(f,{onSubmit:async p=>{if(p.preventDefault(),a.current.value!==i.current.value)return m("The passwords does not match");m(null);try{n(!0),await s(o.current.value,a.current.value),d("/")}catch(h){m(h.message),n(!1)}},children:[r&&e(O,{variant:"danger",children:r}),c(f.Group,{id:"email",children:[e(f.Label,{children:"Email"}),e(f.Control,{ref:o,type:"email",placeholder:"Email",required:!0})]}),c(f.Group,{id:"password",children:[e(f.Label,{children:"Create a password"}),e(f.Control,{ref:a,type:"password",name:"password",placeholder:"Password",required:!0})]}),c(f.Group,{id:"password",children:[e(f.Label,{children:"Confirm password"}),e(f.Control,{ref:i,type:"password",placeholder:"Confirm Password",required:!0})]}),e(k,{disabled:t,className:"text-center",variant:"primary",type:"submit",children:"Submit"})]}),c("div",{className:"text-center mt-3",children:["Already a member? ",e(T,{to:"/login",children:"Log In"})]})]})},Xe=()=>{const{onlineUser:s}=v();return e(R,{children:s?e(ce,{}):e(de,{})})},Ze=()=>{const{signout:s}=v(),t=E();return l.exports.useEffect(async()=>{await s(),t("/")},[]),e(b,{className:"col-md-4 py-5",children:e("div",{className:"text-center",children:e("p",{children:" You're being signed out"})})})},et=s=>{const[t,n]=l.exports.useState(0),[o,a]=l.exports.useState(null),[i,r]=l.exports.useState(null),{onlineUser:m}=v(),d=_();return l.exports.useEffect(()=>{const u=q(j,`${m.uid}/images/ ${s.name}`),p=U(N,"images");Q(u,s).on("state_changed",h=>{n(Math.round(h.bytesTransferred/h.totalBytes*100))},h=>{a(h)},async()=>{const h=await z(u);r(h),await te(p,{created:H(),name:s.name,owner:m.uid,path:u.fullPath,size:s.size,type:s.type,url:h,_id:d})})},[s]),{progress:t,url:i,message:o}},tt=({file:s,setFile:t})=>{const{progress:n,url:o}=et(s);return l.exports.useEffect(()=>{o&&t(null)},[o,t]),e(R,{children:n&&e("div",{className:n,style:{width:n},children:n})})},st=()=>{const[s,t]=l.exports.useState(null),[n,o]=l.exports.useState(null),a=i=>{let r=i.target.files[0];r&&r.type.includes("image")?(t(r),o({type:"success",msg:"File uploaded"})):(t(null),o({type:"warning",msg:"File must be an image"}))};return e("div",{className:"UploadForm",children:c(f,{children:[n&&e(O,{variant:n.type,children:n.msg}),e("h2",{children:"Upload Image"}),c("label",{children:[e("input",{type:"file",onChange:a}),e("span",{children:"+"})]}),e("div",{className:"output",children:s&&e(tt,{file:s,setFile:t})})]})})},nt=(s={})=>{const{onlineUser:t}=v(),n=s.fetchReviewFolders?U(N,"reviewalbums"):U(N,t.uid),o=s.fetchReviewFolders?["reviewalbums"]:[t.uid],a=A(n);return $(o,a,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},at=({query:s})=>{const t=E(),{onlineUser:n}=v();return c(b,{children:[c("div",{className:"text-center",children:[" ",e("h1",{children:"Folders"})," "]}),e("div",{className:"folder-grid",children:s.data&&s.data.map(o=>e("div",{className:"folder-wrap",onClick:()=>t("/folders/"+o.folderName+"/"+n.uid),children:c("h6",{children:["  ",o.folderName," "]})},o._id))})]})},rt=()=>{const s=ie({fetchUserImages:!0}),t=nt();return e("div",{className:"myprofile",children:c(b,{className:"py-3",children:[e("h1",{children:"Profile"}),e(st,{}),c("div",{className:"text-center",children:[e("h2",{children:" Upload Folder"}),e(T,{to:"/uploadfolder",children:e("span",{className:"plus",children:"+"})})]}),e(at,{query:t}),e(oe,{query:s})]})})},lt=()=>{const[s,t]=l.exports.useState(0),[n,o]=l.exports.useState(null),{onlineUser:a}=v(),[i,r]=l.exports.useState(null);return{progress:s,UploadFolder:(d,u,p)=>{const h=_();u===void 0&&(u=[]),p===void 0&&(p=[]);const x=q(j,"folders/"+h);Q(x,d,u).on("state_changed",g=>{t(Math.round(g.bytesTransferred/g.totalBytes*100))},g=>{o(g)},async()=>{const g=await z(x);r(g);const S=W(N,a.uid,d.name);await Pe(S,{created:H(),folderName:d.name,path:x.fullPath,owner:a.uid,url:g,_id:h,folderCover:u.name,folderImages:p})})},url:i,message:n}},ot=()=>{const{UploadFolder:s}=lt(),t=l.exports.useRef(),n=l.exports.useRef(),[o,a]=l.exports.useState(!1),[i,r]=l.exports.useState(null),[m,d]=l.exports.useState(null),[u,p]=l.exports.useState(),h=()=>{const S=t.current.value;return p(S),u},x=S=>{let P=S.target.files[0];P&&P.type.includes("image")?r(P):(r(null),d({type:"warning",msg:"File must be an image"}))};return e(b,{children:c(f,{onSubmit:async S=>{S.preventDefault(),await s({name:t.current.value},i),d({type:"success",msg:"Folder uploaded, go to folder to upload images"})},children:[e("h1",{children:"Create new Folder"}),c(f.Group,{id:"folder",className:"mb-3",children:[e(f.Label,{children:"Foldername:"}),e(f.Control,{type:"text",ref:t,onChange:h}),e(f.Label,{children:"Upload cover: "}),e("input",{type:"file",ref:n,onChange:x})]}),e(k,{disabled:o,type:"submit",children:e("h4",{children:"Create Folder"})}),m&&e(O,{variant:m.type,children:m.msg})]})})},it=()=>{const s=se(),[t,n]=l.exports.useState(s.userid),o=U(N,t);return{updateTitle:async(i,r)=>{const m=await Ae(o);let d=[];m.forEach(h=>{d.push(D({id:h.id,name:h.name},h.data()))});const u=d.find(h=>h.folderName===i),p=W(N,t,u.id);ne(p,{folderName:r})}}},ct=()=>{const[s,t]=l.exports.useState(0),[n,o]=l.exports.useState(null),[a,i]=l.exports.useState(null),{onlineUser:r}=v();return{progress:s,url:a,message:n,uploadImage:async(d,u)=>{if(!d||d==null)return;const p=_(),h=q(j,`${r.uid}/${u}/${d.name}`),x=W(N,r.uid,u);Q(h,d).on("state_changed",g=>{t(Math.round(g.bytesTransferred/g.totalBytes*100))},g=>{o(g)},async()=>{const g=await z(h);i(g),await ne(x,{folderImages:De({name:d.name,owner:r.uid,path:h.fullPath,size:d.size,type:d.type,url:g,_id:p})}),t(null)})}}},dt=s=>{const t=ct(),n=l.exports.useCallback(u=>{!u.length||u.forEach(p=>{t.uploadImage(p,s.albumname)})},[]),{getRootProps:o,getInputProps:a,acceptedFiles:i,isDragActive:r,isDragAccept:m,isDragReject:d}=Te({accept:"image/gif, image/jpeg, image/png, image/webp",onDrop:n,maxFiles:1});return c("div",J(D({},o()),{id:"upload-image-dropzone-wrapper",className:`${m?"drag-accept":""} ${d?"drag-reject":""}`,children:[e("input",D({},a())),r?m?e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}):e("p",{children:"not accepted format"}):e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}),i.length>0&&e("div",{className:"accepted-files mt-2",children:e("ul",{className:"list-unstyled",children:i.map(u=>c("li",{children:[u.name," (",Math.round(u.size/1024)," kb)"]},u.name))})}),e("div",{className:"py-5",children:t.progress!==null&&e(Me,{variant:"success",animated:!0,now:t.progress})})]}))},ut=()=>{const[s,t]=l.exports.useState(null),{onlineUser:n}=v(),[o,a]=l.exports.useState(null);return{UploadReview:(r,m)=>{const d=_();r.folderimages===void 0;const u=q(j,"/revfolders/"+d);Q(u,r).on("state_changed",p=>{},p=>{t(p)},async()=>{const p=await z(u);a(p);const h=U(N,n.uid);var x=new Date,g=x.getHours()+":"+x.getMinutes()+":"+x.getSeconds();await te(h,{created:H(),folderName:g,path:u.fullPath,url:p,_id:d,folderImages:r.folderimages})})},url:o,message:s}},pt=({query:s})=>{const{UploadReview:t}=ut(),[n,o]=l.exports.useState(!1),[a,i]=l.exports.useState([]),[r,m]=l.exports.useState([]),[d,u]=l.exports.useState([]),[p,h]=l.exports.useState("Create review album"),x=()=>{h("Go to profile to view new album"),t({folderimages:r})},g=y=>{const w=r.filter(F=>F.path==y.path),L=d.filter(F=>F.path==y.path);w.length||L.length||(y.className="likedstyle",r.push(y),i(r.length+d.length))},S=y=>{const w=r.filter(F=>F.path==y.path),L=d.filter(F=>F.path==y.path);w.length||L.length||(y.className="dislikedstyle",d.push(y),i(r.length+d.length))},P=y=>{const w=r.filter(C=>C.path!==y.path),L=d.filter(C=>C.path!==y.path);w.length&&m(w),L.length&&u(L);const F=r.filter(C=>C.path==y.path),pe=r.filter(C=>C.path==y.path),he=r.indexOf(F),me=r.indexOf(pe);r.splice(he,1),r.splice(me,1),y.className="neutralstyle",i(r.length+d.length)};return c(b,{children:[c(X,{children:[c("div",{className:"text-center",children:[" ",e("h1",{children:"Images"})]}),e(k,{type:"submit",onClick:()=>o(!n),children:e("h2",{children:"Review Album"})}),e("div",{className:"img-grid",children:s.data&&s.data.map(y=>y.folderImages.map(w=>e("div",{className:w.className?w.className:"img-wrap",children:c(R,{children:["  ",e("img",{src:w.url,alt:"uploaded image"}),n&&c("div",{className:"rewiew-btns",children:[e(B,{className:"like-btn",onClick:()=>{P(w)},icon:Ee}),e(B,{className:"like-btn",onClick:()=>{g(w)},icon:Oe}),e(B,{className:"dislike-btn",onClick:()=>{S(w)},icon:_e})]})]})},w._id)))})]}),n&&c(R,{children:[" ",c("h3",{children:[a<=0?"0":a," / ",s.data?s.data[0].folderImages.length:"0"," "]}),e(k,{type:"submit",onClick:()=>{x()},children:e("h2",{children:p})})]})]})},ht=(s={})=>{const[t,n]=l.exports.useState(s.FolderId),o=U(N,s.folderid),a=s.fetchAlbumImages?[t,s.foldername]:["images"],i=s.fetchAlbumImages?A(o,Z("folderName","==",s.foldername)):A(o);return $(a,i,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},ue=()=>{const{onlineUser:s}=v(),t=se(),[n,o]=l.exports.useState(!1),a=l.exports.useRef(),{updateTitle:i}=it(t.foldername),[r,m]=l.exports.useState(t.foldername),[d,u]=l.exports.useState("https://spontaneous-beijinho-8ddd64.netlify.app/#/folders/"+t.foldername+"/"+t.userid),p=ht({fetchAlbumImages:!0,foldername:t.foldername,folderid:t.userid}),h=()=>{var g=document.getElementById("urlInput");g.select(),g.setSelectionRange(0,99999),navigator.clipboard.writeText(g.value)};return c(R,{children:[c(b,{className:"singleFolder",children:[c("h3",{children:[" Folder ",r]}),c("h2",{children:["   ",e("span",{className:"spantext",children:"Url/Upload/NameChange? PRESS COG "}),e(B,{icon:qe,onClick:()=>o(!n)})," "]})]}),s&&n&&c(b,{className:"foldername col-md-4 py-5",children:[e("h2",{children:"Change foldername:"}),c(f,{onSubmit:g=>{g.preventDefault(),i(t.foldername,a.current.value),t.foldername!==a.current.value&&m(a.current.value)},children:[e(f.Control,{type:"text",ref:a}),e(k,{type:"submit",children:e("h3",{children:"Submit"})})]}),e(dt,{albumname:t.foldername}),c("p",{children:["Share Folderurl:  ",e("input",{type:"text",value:d,id:"urlInput",readOnly:!0})," ",e(k,{onClick:h,children:"Copy text"})]})]}),e(pt,{query:p})]})};function mt(){return c(R,{children:[e(Je,{}),e("div",{className:"App",children:c(Qe,{children:[e(I,{path:"/",element:e(Ve,{})}),e(I,{path:"/loginpage",element:e(Xe,{})}),e(I,{path:"/login",element:e(ce,{})}),e(I,{path:"/signup",element:e(de,{})}),e(I,{path:"/logout",element:e(Ze,{})}),e(I,{path:"/folders/:foldername/:userid",element:e(ue,{})}),e(I,{path:"/revfolders/:foldername/:userid",element:e(ue,{})}),e(I,{path:"/myprofile",element:e(le,{redirectTo:"/login",children:e(rt,{})})}),e(I,{path:"/uploadfolder",element:e(le,{redirectTo:"/login",children:e(ot,{})})})]})})]})}const gt=new ze({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:1e3*60*2,cacheTime:1e3*60*60*4}}});Be.render(e(Ge.StrictMode,{children:e(je,{client:gt,children:e($e,{children:e(Ye,{children:e(Ke,{children:e(mt,{})})})})})}),document.getElementById("root"));
