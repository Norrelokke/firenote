var ve=Object.defineProperty,we=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var V=(t,s,n)=>s in t?ve(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,T=(t,s)=>{for(var n in s||(s={}))Ne.call(s,n)&&V(t,n,s[n]);if(Y)for(var n of Y(s))be.call(s,n)&&V(t,n,s[n]);return t},J=(t,s)=>we(t,xe(s));import{i as Se,g as Re,a as Fe,S as Ie,r as l,o as Ue,j as i,b as e,c as Ce,d as ke,s as Le,e as Ae,N as Pe,C as N,I as X,y as C,f as P,h as Z,u as $,F,k as K,L as E,l as De,m as ee,n as M,p as D,q as g,A as _,B as k,v as q,t as Q,w as z,x as O,z as te,D as H,E as W,G as Te,H as Ee,J as se,K as Me,M as _e,O as ne,P as B,Q as qe,R as Qe,T as ze,U as Oe,V as Be,W as I,X as Ge,Y as je,Z as $e,_ as Ke,$ as He,a0 as We}from"./vendor.0e3449f8.js";const Ye=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerpolicy&&(d.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?d.credentials="include":a.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(a){if(a.ep)return;a.ep=!0;const d=n(a);fetch(a.href,d)}};Ye();const Ve={apiKey:"AIzaSyCNYDAxs-8T9B6_qIIf7Ox8A6gmmayq7kQ",authDomain:"firenote-25182.firebaseapp.com",projectId:"firenote-25182",storageBucket:"firenote-25182.appspot.com",messagingSenderId:"473871512660",appId:"1:473871512660:web:35225075fdc14847ad69c1"},ae=Se(Ve),G=Re(),j=Fe(ae),b=Ie(ae),re=l.exports.createContext(),w=()=>l.exports.useContext(re),Je=({children:t})=>{const[s,n]=l.exports.useState(null),[o,a]=l.exports.useState(!0),d=async(r,c)=>ke(G,r,c),u=(r,c)=>Le(G,r,c),m=(r,c)=>Ae(G);l.exports.useEffect(()=>{Ue(G,r=>{n(r),a(!1)})},[]);const h={signup:d,signin:u,signout:m,onlineUser:s,loading:o};return i(re.Provider,{value:h,children:[o&&e("div",{className:"d-flex justify-content-center vh-100 my-5 align-items-center",children:e(Ce.HashLoader,{color:"#222",size:40})}),!o&&t]})},le=({children:t,redirectTo:s})=>{const{onlineUser:n}=w();return n?t:e(Pe,{to:s})},oe=({query:t})=>e(N,{children:t.data===void 0||t.data.length==1?e(N,{className:"text-center",children:"This folder does not contain any images, go to settings to upload"}):e(X,{children:e("div",{className:"img-grid",children:t.data&&t.data.map(s=>e("div",{className:s.className?s.className:"img-wrap",children:e("img",{src:s.url,alt:"uploaded image"})},s._id))})})}),ie=(t={})=>{const{onlineUser:s}=w(),n=C(b,"images"),o=t.fetchUserImages?["images",s.email]:["images"],a=t.fetchUserImages?P(n,Z("owner","==",s.uid)):P(n);return $(o,a,{idField:"_id"})},Xe=()=>{const{onlineUser:t}=w(),s=ie();return i(F,{children:[e("div",{className:"text-center",children:t?e("p",{children:'Upload folders and images under "my profile" in menu '}):e("p",{children:"Sign up to upload images!"})}),e("div",{className:"text-center",children:e("h1",{children:"Latest from users"})}),e(oe,{query:s})]})},Ze=()=>{const{onlineUser:t}=w();return e(K,{variant:"light",expand:"md",children:i(N,{children:[i(E,{to:"/",className:"navbar-brand",children:[e("span",{role:"img"})," FireNote"]}),e(K.Toggle,{"aria-controls":"basic-navbar-nav"}),e(K.Collapse,{id:"basic-navbar-nav",children:e(De,{className:"ms-auto",children:t?e(F,{children:i(ee,{title:t.email,id:"basic-nav-dropdown",children:[e(M,{to:"/myprofile",className:"nav-link",children:"My Profile"}),e(ee.Divider,{}),e(M,{to:"/logout",className:"nav-link",children:" Logout"})]})}):i(F,{children:[e(M,{to:"/loginPage",className:"nav-link",children:"Login"}),e(M,{to:"/login",className:"nav-link"})]})})})]})})},ce=()=>{const t=l.exports.useRef(),s=l.exports.useRef(),n=D(),{signin:o}=w(),[a,d]=l.exports.useState(null),[u,m]=l.exports.useState(!0);return i(N,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Login"}),i(g,{onSubmit:async r=>{r.preventDefault(),d(null);try{m(!0),await o(t.current.value,s.current.value),n("/")}catch(c){d(c.message),m(!1)}},children:[a&&e(_,{variant:"danger",children:a}),i(g.Group,{id:"email",children:[e(g.Label,{children:"Email"}),e(g.Control,{type:"email",ref:t,placeholder:"Enter email",required:!0})]}),i(g.Group,{id:"Password",children:[e(g.Label,{children:"Password"}),e(g.Control,{type:"password",ref:s,placeholder:"Password",required:!0})]}),e(k,{className:"text-center",variant:"primary",type:"submit",children:"Sign In"})]}),i("div",{className:"text-center mt-3",children:["Need an account? ",e(E,{to:"/signup",children:"Sign Up"})]})]})},de=()=>{const{signup:t}=w(),[s,n]=l.exports.useState(),o=l.exports.useRef(),a=l.exports.useRef(),d=l.exports.useRef(),[u,m]=l.exports.useState(null),h=D();return i(N,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Sign up"}),i(g,{onSubmit:async c=>{if(c.preventDefault(),a.current.value!==d.current.value)return m("The passwords does not match");m(null);try{n(!0),await t(o.current.value,a.current.value),h("/")}catch(f){m(f.message),n(!1)}},children:[u&&e(_,{variant:"danger",children:u}),i(g.Group,{id:"email",children:[e(g.Label,{children:"Email"}),e(g.Control,{ref:o,type:"email",placeholder:"Email",required:!0})]}),i(g.Group,{id:"password",children:[e(g.Label,{children:"Create a password"}),e(g.Control,{ref:a,type:"password",name:"password",placeholder:"Password",required:!0})]}),i(g.Group,{id:"password",children:[e(g.Label,{children:"Confirm password"}),e(g.Control,{ref:d,type:"password",placeholder:"Confirm Password",required:!0})]}),e(k,{disabled:s,className:"text-center",variant:"primary",type:"submit",children:"Submit"})]}),i("div",{className:"text-center mt-3",children:["Already a member? ",e(E,{to:"/login",children:"Log In"})]})]})},et=()=>{const{onlineUser:t}=w();return e(F,{children:t?e(ce,{}):e(de,{})})},tt=()=>{const{signout:t}=w(),s=D();return l.exports.useEffect(async()=>{await t(),s("/")},[]),e(N,{className:"col-md-4 py-5",children:e("div",{className:"text-center",children:e("p",{children:" You're being signed out"})})})},st=t=>{const[s,n]=l.exports.useState(0),[o,a]=l.exports.useState(null),[d,u]=l.exports.useState(null),{onlineUser:m}=w(),h=q();return l.exports.useEffect(()=>{const r=Q(j,`${m.email}/images/ ${t.name}`),c=C(b,"images");z(r,t).on("state_changed",f=>{n(Math.round(f.bytesTransferred/f.totalBytes*100))},f=>{a(f)},async()=>{const f=await O(r);u(f),await te(c,{created:H(),name:t.name,owner:m.email,path:r.fullPath,size:t.size,type:t.type,url:f,_id:h})})},[t]),{progress:s,url:d,message:o}},nt=({file:t,setFile:s})=>{const{progress:n,url:o}=st(t);return l.exports.useEffect(()=>{o&&s(null)},[o,s]),e(F,{children:n&&e("div",{className:n,style:{width:n},children:n})})},at=()=>{const[t,s]=l.exports.useState(null),[n,o]=l.exports.useState(null),a=d=>{let u=d.target.files[0];u&&u.type.includes("image")?(s(u),o({type:"success",msg:"File uploaded"})):(s(null),o({type:"warning",msg:"File must be an image"}))};return e("div",{className:"UploadForm",children:i(g,{children:[n&&e(_,{variant:n.type,children:n.msg}),e("h2",{children:"Upload Image"}),i("label",{children:[e("input",{type:"file",onChange:a}),e("span",{children:"+"})]}),e("div",{className:"output",children:t&&e(nt,{file:t,setFile:s})})]})})},rt=(t={})=>{const{onlineUser:s}=w(),n=t.fetchReviewFolders?C(b,"reviewalbums"):C(b,s.email),o=t.fetchReviewFolders?["reviewalbums"]:[s.email],a=P(n);return $(o,a,{idField:"_id"})},lt=({query:t})=>{const s=D(),{onlineUser:n}=w();return i(N,{children:[i("div",{className:"text-center",children:[" ",e("h1",{children:"Folders"})," "]}),e("div",{className:"folder-grid",children:t.data&&t.data.map(o=>e("div",{className:"folder-wrap",onClick:()=>s("/folders/"+o.folderName+"/"+n.uid),children:i("h2",{children:["  ",o.folderName," "]})},o._id))})]})},ot=()=>{const t=ie({fetchUserImages:!0}),s=rt();return e("div",{className:"myprofile",children:i(N,{className:"py-3",children:[e("h1",{children:"Profile"}),e(at,{}),i("div",{className:"text-center",children:[e("h2",{children:" Upload Folder"}),e(E,{to:"/uploadfolder",children:e("span",{className:"plus",children:"+"})})]}),e(lt,{query:s}),e(oe,{query:t})]})})},it=()=>{const[t,s]=l.exports.useState(0),[n,o]=l.exports.useState(null),{onlineUser:a}=w(),[d,u]=l.exports.useState(null);return{progress:t,UploadFolder:(h,r,c)=>{const f=q();r===void 0&&(r=[]),c===void 0&&(c=[]);const y=Q(j,"folders/"+f);z(y,h,r).on("state_changed",p=>{s(Math.round(p.bytesTransferred/p.totalBytes*100))},p=>{o(p)},async()=>{const p=await O(y);u(p);const S=W(b,a.email,h.name);await Te(S,{created:H(),folderName:h.name,path:y.fullPath,owner:a.email,url:p,_id:f,folderCover:r.name,folderImages:c})})},url:d,message:n}},ct=()=>{const{UploadFolder:t}=it(),s=l.exports.useRef(),n=l.exports.useRef(),[o,a]=l.exports.useState(!1),[d,u]=l.exports.useState(null),[m,h]=l.exports.useState(null),[r,c]=l.exports.useState(),f=()=>{const S=s.current.value;return c(S),r},y=S=>{let A=S.target.files[0];A&&A.type.includes("image")?u(A):(u(null),h({type:"warning",msg:"File must be an image"}))};return e(N,{children:i(g,{onSubmit:async S=>{S.preventDefault(),await t({name:s.current.value},d),h({type:"success",msg:"Folder uploaded, go to folder to upload images"})},children:[e("h1",{children:"Create new Folder"}),i(g.Group,{id:"folder",className:"mb-3",children:[e(g.Label,{children:"Foldername:"}),e(g.Control,{type:"text",ref:s,onChange:f}),e(g.Label,{children:"Upload cover: "}),e("input",{type:"file",ref:n,onChange:y})]}),e(k,{disabled:o,type:"submit",children:e("h4",{children:"Create Folder"})}),m&&e(_,{variant:m.type,children:m.msg})]})})},dt=()=>{const{onlineUser:t}=w(),s=C(b,t.email);return{updateTitle:async(o,a)=>{const d=await Ee(s);let u=[];d.forEach(r=>{u.push(T({id:r.id,name:r.name},r.data()))});const m=u.find(r=>r.folderName===o),h=W(b,t.email,m.id);se(h,{folderName:a})}}},ut=()=>{const t=q(),[s,n]=l.exports.useState(0),[o,a]=l.exports.useState(null),[d,u]=l.exports.useState(null),{onlineUser:m}=w();return{progress:s,url:d,message:o,uploadImage:(r,c)=>{if(!r||r==null)return;const f=Q(j,`${m.uid}/${c}/${r.name}`),y=W(b,m.email,c);z(f,r).on("state_changed",p=>{n(Math.round(p.bytesTransferred/p.totalBytes*100))},p=>{a(p)},async()=>{const p=await O(f);u(p),await se(y,{folderImages:Me({name:r.name,owner:m.email,path:f.fullPath,size:r.size,type:r.type,url:p,_id:t})})})}}},mt=t=>{const s=ut(),n=l.exports.useCallback(r=>{!r.length||r.forEach(c=>{s.uploadImage(c,t.albumname)})},[]),{getRootProps:o,getInputProps:a,acceptedFiles:d,isDragActive:u,isDragAccept:m,isDragReject:h}=_e({accept:"image/gif, image/jpeg, image/png, image/webp",onDrop:n,maxFiles:3});return i("div",J(T({},o()),{id:"upload-image-dropzone-wrapper",className:`${m?"drag-accept":""} ${h?"drag-reject":""}`,children:[e("input",T({},a())),u?m?e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}):e("p",{children:"not accepted format"}):e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}),d.length>0&&e("div",{className:"accepted-files mt-2",children:e("ul",{className:"list-unstyled",children:d.map(r=>i("li",{children:[r.name," (",Math.round(r.size/1024)," kb)"]},r.name))})})]}))},pt=()=>{const[t,s]=l.exports.useState(null),{onlineUser:n}=w(),[o,a]=l.exports.useState(null);return{UploadReview:(u,m)=>{const h=q();u.folderimages===void 0;const r=Q(j,"/revfolders/"+h);z(r,u).on("state_changed",c=>{},c=>{s(c)},async()=>{const c=await O(r);a(c);const f=C(b,n.email);var y=new Date,p=y.getHours()+":"+y.getMinutes()+":"+y.getSeconds();await te(f,{created:H(),folderName:p,path:r.fullPath,url:c,_id:h,folderImages:u.folderimages})})},url:o,message:t}},ht=({query:t})=>{const s=ne(),{UploadReview:n}=pt(),o=D(),[a,d]=l.exports.useState(!1),[u,m]=l.exports.useState(!1),[h,r]=l.exports.useState([]),[c,f]=l.exports.useState([]),[y,p]=l.exports.useState([]);l.exports.useEffect(()=>{s.foldername&&m(!0)},[]);const S=()=>{d(!a)},A=async()=>{await n({folderimages:c}),o("/")},me=v=>{const x=c.filter(R=>R.path==v.path),L=y.filter(R=>R.path==v.path);x.length||L.length||(v.className="likedstyle",c.push(v),r(c.length+y.length))},pe=v=>{const x=c.filter(R=>R.path==v.path),L=y.filter(R=>R.path==v.path);x.length||L.length||(v.className="dislikedstyle",y.push(v),r(c.length+y.length))},he=v=>{const x=c.filter(U=>U.path!==v.path),L=y.filter(U=>U.path!==v.path);x.length&&f(x),L.length&&p(L);const R=c.filter(U=>U.path==v.path),ge=c.filter(U=>U.path==v.path),fe=c.indexOf(R),ye=c.indexOf(ge);c.splice(fe,1),c.splice(ye,1),v.className="neutralstyle",r(c.length+y.length)};return i(N,{children:[i(X,{children:[i("div",{className:"text-center",children:[" ",e("h1",{children:"Images"})]}),u&&e(k,{type:"submit",onClick:S,children:e("h2",{children:"Review Album"})}),e("div",{className:"img-grid",children:t.data&&t.data.map(v=>v.folderImages.map(x=>i("div",{className:x.className?x.className:"img-wrap",children:[x._id,i(F,{children:["  ",e("img",{src:x.url,alt:"uploaded image"}),a&&i("div",{className:"rewiew-btns",children:[e(B,{className:"like-btn",onClick:()=>{he(x)},icon:qe}),e(B,{className:"like-btn",onClick:()=>{me(x)},icon:Qe}),e(B,{className:"dislike-btn",onClick:()=>{pe(x)},icon:ze})]})]})]},x._id)))})]}),a&&i(F,{children:[" ",i("h3",{children:[h<=0?"0":h," / ",t.data?t.data[0].folderImages.length:"0"," "]}),e(k,{type:"submit",onClick:()=>{A()},children:e("h2",{children:"Create Review Album"})})]})]})},gt=(t={})=>{const{onlineUser:s}=w(),[n,o]=l.exports.useState(s.email),a=C(b,s.email),d=t.fetchAlbumImages?[n,t.foldername]:["images"],u=t.fetchAlbumImages?P(a,Z("folderName","==",t.foldername)):P(a);return $(d,u,{idField:"_id"})},ue=()=>{const t=ne(),[s,n]=l.exports.useState(!1),o=l.exports.useRef(),{updateTitle:a}=dt(t.foldername),[d,u]=l.exports.useState(t.foldername),[m,h]=l.exports.useState("/folders/"+t.foldername+"/"+t.userid),r=gt({fetchAlbumImages:!0,foldername:t.foldername,folderid:t.userid}),c=()=>{n(!s)},f=()=>{var p=document.getElementById("urlInput");p.select(),p.setSelectionRange(0,99999),navigator.clipboard.writeText(p.value)};return i(F,{children:[i(N,{className:"singleFolder",children:[i("h3",{children:[" Folder ",d]}),i("h2",{children:["  ",e(B,{icon:Oe,onClick:c})," "]})]}),s&&i(N,{className:"foldername col-md-4 py-5",children:[e("h2",{children:"Change foldername:"}),i(g,{onSubmit:async p=>{p.preventDefault(),a(t.foldername,o.current.value),t.foldername!==o.current.value&&u(o.current.value)},children:[e(g.Control,{type:"text",ref:o}),e(k,{type:"submit",children:e("h3",{children:"Submit"})})]}),e(mt,{albumname:t.foldername}),i("p",{children:["Share Folderurl:  ",e("input",{type:"text",value:m,id:"urlInput",readOnly:!0})," ",e(k,{onClick:f,children:"Copy text"})]})]}),e(ht,{query:r})]})};function ft(){return i(F,{children:[e(Ze,{}),e("div",{className:"App",children:i(Be,{children:[e(I,{path:"/",element:e(Xe,{})}),e(I,{path:"/loginpage",element:e(et,{})}),e(I,{path:"/login",element:e(ce,{})}),e(I,{path:"/signup",element:e(de,{})}),e(I,{path:"/logout",element:e(tt,{})}),e(I,{path:"/folders/:foldername/:userid",element:e(ue,{})}),e(I,{path:"/revfolders/:foldername/:userid",element:e(ue,{})}),e(I,{path:"/myprofile",element:e(le,{redirectTo:"/login",children:e(ot,{})})}),e(I,{path:"/uploadfolder",element:e(le,{redirectTo:"/login",children:e(ct,{})})})]})})]})}const yt=new Ge({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:1e3*60*2,cacheTime:1e3*60*60*4}}});je.render(e($e.StrictMode,{children:e(Ke,{client:yt,children:e(He,{children:e(Je,{children:e(We,{children:e(ft,{})})})})})}),document.getElementById("root"));
