var ve=Object.defineProperty,we=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var V=(t,s,n)=>s in t?ve(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,T=(t,s)=>{for(var n in s||(s={}))Ne.call(s,n)&&V(t,n,s[n]);if(Y)for(var n of Y(s))be.call(s,n)&&V(t,n,s[n]);return t},J=(t,s)=>we(t,xe(s));import{i as Se,g as Re,a as Fe,S as Ie,r,o as Ue,j as i,b as e,c as Ce,d as ke,s as Le,e as Ae,N as Pe,C as N,I as X,y as C,f as P,h as Z,u as $,F,k as K,L as M,l as De,m as ee,n as E,p as D,q as g,A as _,B as k,v as O,t as q,w as Q,x as z,z as te,D as H,E as W,G as Te,H as Me,J as se,K as Ee,M as _e,P as Oe,O as ne,Q as B,R as qe,T as Qe,U as ze,V as Be,W as Ge,X as I,Y as je,Z as $e,_ as Ke,$ as He,a0 as We,a1 as Ye}from"./vendor.31911aef.js";const Ve=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}};Ve();const Je={apiKey:"AIzaSyCNYDAxs-8T9B6_qIIf7Ox8A6gmmayq7kQ",authDomain:"firenote-25182.firebaseapp.com",projectId:"firenote-25182",storageBucket:"firenote-25182.appspot.com",messagingSenderId:"473871512660",appId:"1:473871512660:web:35225075fdc14847ad69c1"},ae=Se(Je),G=Re(),j=Fe(ae),b=Ie(ae),re=r.exports.createContext(),w=()=>r.exports.useContext(re),Xe=({children:t})=>{const[s,n]=r.exports.useState(null),[l,a]=r.exports.useState(!0),c=async(o,d)=>ke(G,o,d),u=(o,d)=>Le(G,o,d),p=(o,d)=>Ae(G);r.exports.useEffect(()=>{Ue(G,o=>{n(o),a(!1)})},[]);const m={signup:c,signin:u,signout:p,onlineUser:s,loading:l};return i(re.Provider,{value:m,children:[l&&e("div",{className:"d-flex justify-content-center vh-100 my-5 align-items-center",children:e(Ce.HashLoader,{color:"#222",size:40})}),!l&&t]})},le=({children:t,redirectTo:s})=>{const{onlineUser:n}=w();return n?t:e(Pe,{to:s})},oe=({query:t})=>e(N,{children:t.data===void 0||t.data.length==1?e(N,{className:"text-center",children:"This folder does not contain any images, go to settings to upload"}):e(X,{children:e("div",{className:"img-grid",children:t.data&&t.data.map(s=>e("div",{className:s.className?s.className:"img-wrap",children:e("img",{src:s.url,alt:"uploaded image"})},s._id))})})}),ie=(t={})=>{const{onlineUser:s}=w(),n=C(b,"images"),l=t.fetchUserImages?["images",s.email]:["images"],a=t.fetchUserImages?P(n,Z("owner","==",s.uid)):P(n);return $(l,a,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},Ze=()=>{const{onlineUser:t}=w(),s=ie();return i(F,{children:[e("div",{className:"text-center",children:t?e("p",{children:'Upload folders and images under "my profile" in menu '}):e("p",{children:"Sign up to upload images!"})}),e("div",{className:"text-center",children:e("h1",{children:"Latest from users"})}),e(oe,{query:s})]})},et=()=>{const{onlineUser:t}=w();return e(K,{variant:"light",expand:"md",children:i(N,{children:[i(M,{to:"/",className:"navbar-brand",children:[e("span",{role:"img"})," FireNote"]}),e(K.Toggle,{"aria-controls":"basic-navbar-nav"}),e(K.Collapse,{id:"basic-navbar-nav",children:e(De,{className:"ms-auto",children:t?e(F,{children:i(ee,{title:t.email,id:"basic-nav-dropdown",children:[e(E,{to:"/myprofile",className:"nav-link",children:"My Profile"}),e(ee.Divider,{}),e(E,{to:"/logout",className:"nav-link",children:" Logout"})]})}):i(F,{children:[e(E,{to:"/loginPage",className:"nav-link",children:"Login"}),e(E,{to:"/login",className:"nav-link"})]})})})]})})},ce=()=>{const t=r.exports.useRef(),s=r.exports.useRef(),n=D(),{signin:l}=w(),[a,c]=r.exports.useState(null),[u,p]=r.exports.useState(!0);return i(N,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Login"}),i(g,{onSubmit:async o=>{o.preventDefault(),c(null);try{p(!0),await l(t.current.value,s.current.value),n("/")}catch(d){c(d.message),p(!1)}},children:[a&&e(_,{variant:"danger",children:a}),i(g.Group,{id:"email",children:[e(g.Label,{children:"Email"}),e(g.Control,{type:"email",ref:t,placeholder:"Enter email",required:!0})]}),i(g.Group,{id:"Password",children:[e(g.Label,{children:"Password"}),e(g.Control,{type:"password",ref:s,placeholder:"Password",required:!0})]}),e(k,{className:"text-center",variant:"primary",type:"submit",children:"Sign In"})]}),i("div",{className:"text-center mt-3",children:["Need an account? ",e(M,{to:"/signup",children:"Sign Up"})]})]})},de=()=>{const{signup:t}=w(),[s,n]=r.exports.useState(),l=r.exports.useRef(),a=r.exports.useRef(),c=r.exports.useRef(),[u,p]=r.exports.useState(null),m=D();return i(N,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Sign up"}),i(g,{onSubmit:async d=>{if(d.preventDefault(),a.current.value!==c.current.value)return p("The passwords does not match");p(null);try{n(!0),await t(l.current.value,a.current.value),m("/")}catch(f){p(f.message),n(!1)}},children:[u&&e(_,{variant:"danger",children:u}),i(g.Group,{id:"email",children:[e(g.Label,{children:"Email"}),e(g.Control,{ref:l,type:"email",placeholder:"Email",required:!0})]}),i(g.Group,{id:"password",children:[e(g.Label,{children:"Create a password"}),e(g.Control,{ref:a,type:"password",name:"password",placeholder:"Password",required:!0})]}),i(g.Group,{id:"password",children:[e(g.Label,{children:"Confirm password"}),e(g.Control,{ref:c,type:"password",placeholder:"Confirm Password",required:!0})]}),e(k,{disabled:s,className:"text-center",variant:"primary",type:"submit",children:"Submit"})]}),i("div",{className:"text-center mt-3",children:["Already a member? ",e(M,{to:"/login",children:"Log In"})]})]})},tt=()=>{const{onlineUser:t}=w();return e(F,{children:t?e(ce,{}):e(de,{})})},st=()=>{const{signout:t}=w(),s=D();return r.exports.useEffect(async()=>{await t(),s("/")},[]),e(N,{className:"col-md-4 py-5",children:e("div",{className:"text-center",children:e("p",{children:" You're being signed out"})})})},nt=t=>{const[s,n]=r.exports.useState(0),[l,a]=r.exports.useState(null),[c,u]=r.exports.useState(null),{onlineUser:p}=w(),m=O();return r.exports.useEffect(()=>{const o=q(j,`${p.email}/images/ ${t.name}`),d=C(b,"images");Q(o,t).on("state_changed",f=>{n(Math.round(f.bytesTransferred/f.totalBytes*100))},f=>{a(f)},async()=>{const f=await z(o);u(f),await te(d,{created:H(),name:t.name,owner:p.email,path:o.fullPath,size:t.size,type:t.type,url:f,_id:m})})},[t]),{progress:s,url:c,message:l}},at=({file:t,setFile:s})=>{const{progress:n,url:l}=nt(t);return r.exports.useEffect(()=>{l&&s(null)},[l,s]),e(F,{children:n&&e("div",{className:n,style:{width:n},children:n})})},rt=()=>{const[t,s]=r.exports.useState(null),[n,l]=r.exports.useState(null),a=c=>{let u=c.target.files[0];u&&u.type.includes("image")?(s(u),l({type:"success",msg:"File uploaded"})):(s(null),l({type:"warning",msg:"File must be an image"}))};return e("div",{className:"UploadForm",children:i(g,{children:[n&&e(_,{variant:n.type,children:n.msg}),e("h2",{children:"Upload Image"}),i("label",{children:[e("input",{type:"file",onChange:a}),e("span",{children:"+"})]}),e("div",{className:"output",children:t&&e(at,{file:t,setFile:s})})]})})},lt=(t={})=>{const{onlineUser:s}=w(),n=t.fetchReviewFolders?C(b,"reviewalbums"):C(b,s.email),l=t.fetchReviewFolders?["reviewalbums"]:[s.email],a=P(n);return $(l,a,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},ot=({query:t})=>{const s=D(),{onlineUser:n}=w();return i(N,{children:[i("div",{className:"text-center",children:[" ",e("h1",{children:"Folders"})," "]}),e("div",{className:"folder-grid",children:t.data&&t.data.map(l=>e("div",{className:"folder-wrap",onClick:()=>s("/folders/"+l.folderName+"/"+n.uid),children:i("h2",{children:["  ",l.folderName," "]})},l._id))})]})},it=()=>{const t=ie({fetchUserImages:!0}),s=lt();return e("div",{className:"myprofile",children:i(N,{className:"py-3",children:[e("h1",{children:"Profile"}),e(rt,{}),i("div",{className:"text-center",children:[e("h2",{children:" Upload Folder"}),e(M,{to:"/uploadfolder",children:e("span",{className:"plus",children:"+"})})]}),e(ot,{query:s}),e(oe,{query:t})]})})},ct=()=>{const[t,s]=r.exports.useState(0),[n,l]=r.exports.useState(null),{onlineUser:a}=w(),[c,u]=r.exports.useState(null);return{progress:t,UploadFolder:(m,o,d)=>{const f=O();o===void 0&&(o=[]),d===void 0&&(d=[]);const y=q(j,"folders/"+f);Q(y,m,o).on("state_changed",h=>{s(Math.round(h.bytesTransferred/h.totalBytes*100))},h=>{l(h)},async()=>{const h=await z(y);u(h);const S=W(b,a.email,m.name);await Te(S,{created:H(),folderName:m.name,path:y.fullPath,owner:a.email,url:h,_id:f,folderCover:o.name,folderImages:d})})},url:c,message:n}},dt=()=>{const{UploadFolder:t}=ct(),s=r.exports.useRef(),n=r.exports.useRef(),[l,a]=r.exports.useState(!1),[c,u]=r.exports.useState(null),[p,m]=r.exports.useState(null),[o,d]=r.exports.useState(),f=()=>{const S=s.current.value;return d(S),o},y=S=>{let A=S.target.files[0];A&&A.type.includes("image")?u(A):(u(null),m({type:"warning",msg:"File must be an image"}))};return e(N,{children:i(g,{onSubmit:async S=>{S.preventDefault(),await t({name:s.current.value},c),m({type:"success",msg:"Folder uploaded, go to folder to upload images"})},children:[e("h1",{children:"Create new Folder"}),i(g.Group,{id:"folder",className:"mb-3",children:[e(g.Label,{children:"Foldername:"}),e(g.Control,{type:"text",ref:s,onChange:f}),e(g.Label,{children:"Upload cover: "}),e("input",{type:"file",ref:n,onChange:y})]}),e(k,{disabled:l,type:"submit",children:e("h4",{children:"Create Folder"})}),p&&e(_,{variant:p.type,children:p.msg})]})})},ut=()=>{const{onlineUser:t}=w(),s=C(b,t.email);return{updateTitle:async(l,a)=>{const c=await Me(s);let u=[];c.forEach(o=>{u.push(T({id:o.id,name:o.name},o.data()))});const p=u.find(o=>o.folderName===l),m=W(b,t.email,p.id);se(m,{folderName:a})}}},mt=()=>{const[t,s]=r.exports.useState(0),[n,l]=r.exports.useState(null),[a,c]=r.exports.useState(null),{onlineUser:u}=w();return{progress:t,url:a,message:n,uploadImage:async(m,o)=>{if(!m||m==null)return;const d=O(),f=q(j,`${u.uid}/${o}/${m.name}`),y=W(b,u.email,o);Q(f,m).on("state_changed",h=>{s(Math.round(h.bytesTransferred/h.totalBytes*100))},h=>{l(h)},async()=>{const h=await z(f);c(h),await se(y,{folderImages:Ee({name:m.name,owner:u.email,path:f.fullPath,size:m.size,type:m.type,url:h,_id:d})}),s(null)})}}},pt=t=>{const s=mt(),n=r.exports.useCallback(o=>{!o.length||o.forEach(d=>{s.uploadImage(d,t.albumname)})},[]),{getRootProps:l,getInputProps:a,acceptedFiles:c,isDragActive:u,isDragAccept:p,isDragReject:m}=_e({accept:"image/gif, image/jpeg, image/png, image/webp",onDrop:n,maxFiles:1});return i("div",J(T({},l()),{id:"upload-image-dropzone-wrapper",className:`${p?"drag-accept":""} ${m?"drag-reject":""}`,children:[e("input",T({},a())),u?p?e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}):e("p",{children:"not accepted format"}):e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}),c.length>0&&e("div",{className:"accepted-files mt-2",children:e("ul",{className:"list-unstyled",children:c.map(o=>i("li",{children:[o.name," (",Math.round(o.size/1024)," kb)"]},o.name))})}),e("div",{className:"py-5",children:s.progress!==null&&e(Oe,{variant:"success",animated:!0,now:s.progress})})]}))},ht=()=>{const[t,s]=r.exports.useState(null),{onlineUser:n}=w(),[l,a]=r.exports.useState(null);return{UploadReview:(u,p)=>{const m=O();u.folderimages===void 0;const o=q(j,"/revfolders/"+m);Q(o,u).on("state_changed",d=>{},d=>{s(d)},async()=>{const d=await z(o);a(d);const f=C(b,n.email);var y=new Date,h=y.getHours()+":"+y.getMinutes()+":"+y.getSeconds();await te(f,{created:H(),folderName:h,path:o.fullPath,url:d,_id:m,folderImages:u.folderimages})})},url:l,message:t}},gt=({query:t})=>{const s=ne(),{UploadReview:n}=ht(),l=D(),[a,c]=r.exports.useState(!1),[u,p]=r.exports.useState(!1),[m,o]=r.exports.useState([]),[d,f]=r.exports.useState([]),[y,h]=r.exports.useState([]);r.exports.useEffect(()=>{s.foldername&&p(!0)},[]);const S=()=>{c(!a)},A=async()=>{await n({folderimages:d}),l("/")},me=v=>{const x=d.filter(R=>R.path==v.path),L=y.filter(R=>R.path==v.path);x.length||L.length||(v.className="likedstyle",d.push(v),o(d.length+y.length))},pe=v=>{const x=d.filter(R=>R.path==v.path),L=y.filter(R=>R.path==v.path);x.length||L.length||(v.className="dislikedstyle",y.push(v),o(d.length+y.length))},he=v=>{const x=d.filter(U=>U.path!==v.path),L=y.filter(U=>U.path!==v.path);x.length&&f(x),L.length&&h(L);const R=d.filter(U=>U.path==v.path),ge=d.filter(U=>U.path==v.path),fe=d.indexOf(R),ye=d.indexOf(ge);d.splice(fe,1),d.splice(ye,1),v.className="neutralstyle",o(d.length+y.length)};return i(N,{children:[i(X,{children:[i("div",{className:"text-center",children:[" ",e("h1",{children:"Images"})]}),u&&e(k,{type:"submit",onClick:S,children:e("h2",{children:"Review Album"})}),e("div",{className:"img-grid",children:t.data&&t.data.map(v=>v.folderImages.map(x=>i("div",{className:x.className?x.className:"img-wrap",children:[x._id,i(F,{children:["  ",e("img",{src:x.url,alt:"uploaded image"}),a&&i("div",{className:"rewiew-btns",children:[e(B,{className:"like-btn",onClick:()=>{he(x)},icon:qe}),e(B,{className:"like-btn",onClick:()=>{me(x)},icon:Qe}),e(B,{className:"dislike-btn",onClick:()=>{pe(x)},icon:ze})]})]})]},x._id)))})]}),a&&i(F,{children:[" ",i("h3",{children:[m<=0?"0":m," / ",t.data?t.data[0].folderImages.length:"0"," "]}),e(k,{type:"submit",onClick:()=>{A()},children:e("h2",{children:"Create Review Album"})})]})]})},ft=(t={})=>{const{onlineUser:s}=w(),[n,l]=r.exports.useState(s.email),a=C(b,s.email),c=t.fetchAlbumImages?[n,t.foldername]:["images"],u=t.fetchAlbumImages?P(a,Z("folderName","==",t.foldername)):P(a);return $(c,u,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},ue=()=>{const t=ne(),[s,n]=r.exports.useState(!1),l=r.exports.useRef(),{updateTitle:a}=ut(t.foldername),[c,u]=r.exports.useState(t.foldername),[p,m]=r.exports.useState("/folders/"+t.foldername+"/"+t.userid),o=ft({fetchAlbumImages:!0,foldername:t.foldername,folderid:t.userid}),d=()=>{n(!s)},f=()=>{var h=document.getElementById("urlInput");h.select(),h.setSelectionRange(0,99999),navigator.clipboard.writeText(h.value)};return i(F,{children:[i(N,{className:"singleFolder",children:[i("h3",{children:[" Folder ",c]}),i("h2",{children:["  ",e(B,{icon:Be,onClick:d})," "]})]}),s&&i(N,{className:"foldername col-md-4 py-5",children:[e("h2",{children:"Change foldername:"}),i(g,{onSubmit:async h=>{h.preventDefault(),a(t.foldername,l.current.value),t.foldername!==l.current.value&&u(l.current.value)},children:[e(g.Control,{type:"text",ref:l}),e(k,{type:"submit",children:e("h3",{children:"Submit"})})]}),e(pt,{albumname:t.foldername}),i("p",{children:["Share Folderurl:  ",e("input",{type:"text",value:p,id:"urlInput",readOnly:!0})," ",e(k,{onClick:f,children:"Copy text"})]})]}),e(gt,{query:o})]})};function yt(){return i(F,{children:[e(et,{}),e("div",{className:"App",children:i(Ge,{children:[e(I,{path:"/",element:e(Ze,{})}),e(I,{path:"/loginpage",element:e(tt,{})}),e(I,{path:"/login",element:e(ce,{})}),e(I,{path:"/signup",element:e(de,{})}),e(I,{path:"/logout",element:e(st,{})}),e(I,{path:"/folders/:foldername/:userid",element:e(ue,{})}),e(I,{path:"/revfolders/:foldername/:userid",element:e(ue,{})}),e(I,{path:"/myprofile",element:e(le,{redirectTo:"/login",children:e(it,{})})}),e(I,{path:"/uploadfolder",element:e(le,{redirectTo:"/login",children:e(dt,{})})})]})})]})}const vt=new je({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:1e3*60*2,cacheTime:1e3*60*60*4}}});$e.render(e(Ke.StrictMode,{children:e(He,{client:vt,children:e(We,{children:e(Xe,{children:e(Ye,{children:e(yt,{})})})})})}),document.getElementById("root"));
