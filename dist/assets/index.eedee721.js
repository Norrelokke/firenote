var we=Object.defineProperty,be=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var ee=(s,t,n)=>t in s?we(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,O=(s,t)=>{for(var n in t||(t={}))Se.call(t,n)&&ee(s,n,t[n]);if(Z)for(var n of Z(t))Fe.call(t,n)&&ee(s,n,t[n]);return s},te=(s,t)=>be(s,Ne(t));import{i as Ie,g as Re,a as Ce,S as Ue,r,o as ke,j as o,b as e,c as Le,d as Pe,s as Ae,e as Te,N as De,C as N,I as se,y as k,f as T,h as ne,u as H,F as I,k as W,L as E,l as Me,m as ae,n as _,p as D,q as f,A as M,B as C,v as q,t as Q,w as z,x as B,z as re,D as Y,E as V,G as Oe,H as J,J as Ee,K as le,M as _e,O as qe,P as Qe,Q as G,R as ze,T as Be,U as Ge,V as je,W as $e,X as R,Y as Ke,Z as He,_ as We,$ as Ye,a0 as Ve,a1 as Je}from"./vendor.9b6687f4.js";const Xe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};Xe();const Ze={apiKey:"AIzaSyCNYDAxs-8T9B6_qIIf7Ox8A6gmmayq7kQ",authDomain:"firenote-25182.firebaseapp.com",projectId:"firenote-25182",storageBucket:"firenote-25182.appspot.com",messagingSenderId:"473871512660",appId:"1:473871512660:web:35225075fdc14847ad69c1"},oe=Ie(Ze),j=Re(),$=Ce(oe),S=Ue(oe),ie=r.exports.createContext(),x=()=>r.exports.useContext(ie),et=({children:s})=>{const[t,n]=r.exports.useState(null),[l,a]=r.exports.useState(!0),i=async(p,u)=>Pe(j,p,u),d=(p,u)=>Ae(j,p,u),h=(p,u)=>Te(j);r.exports.useEffect(()=>{ke(j,p=>{n(p),a(!1)})},[]);const c={signup:i,signin:d,signout:h,onlineUser:t,loading:l};return o(ie.Provider,{value:c,children:[l&&e("div",{className:"d-flex justify-content-center vh-100 my-5 align-items-center",children:e(Le.HashLoader,{color:"#222",size:40})}),!l&&s]})},ce=({children:s,redirectTo:t})=>{const{onlineUser:n}=x();return n?s:e(De,{to:t})},de=({query:s})=>e(N,{children:s.data===void 0||s.data.length==1?e(N,{className:"text-center",children:"This folder does not contain any images, go to settings to upload"}):e(se,{children:e("div",{className:"img-grid",children:s.data&&s.data.map(t=>e("div",{className:t.className?t.className:"img-wrap",children:e("img",{src:t.url,alt:"uploaded image"})},t._id))})})}),ue=(s={})=>{const{onlineUser:t}=x(),n=k(S,"images"),l=s.fetchUserImages?["images",t.uid]:["images"],a=s.fetchUserImages?T(n,ne("owner","==",t.uid)):T(n);return H(l,a,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},tt=()=>{const{onlineUser:s}=x(),t=ue();return o(I,{children:[e("div",{className:"text-center",children:s?e("p",{children:'Upload folders and images under "my profile" in menu '}):e("p",{children:"Sign up to upload images!"})}),e("div",{className:"text-center",children:e("h1",{children:"Latest from users"})}),e(de,{query:t})]})},st=()=>{const{onlineUser:s}=x();return e(W,{variant:"light",expand:"md",children:o(N,{children:[o(E,{to:"/",className:"navbar-brand",children:[e("span",{role:"img"})," FireNote"]}),e(W.Toggle,{"aria-controls":"basic-navbar-nav"}),e(W.Collapse,{id:"basic-navbar-nav",children:e(Me,{className:"ms-auto",children:s?e(I,{children:o(ae,{title:s.email,id:"basic-nav-dropdown",children:[e(_,{to:"/myprofile",className:"nav-link",children:"My Profile"}),e(ae.Divider,{}),e(_,{to:"/logout",className:"nav-link",children:" Logout"})]})}):o(I,{children:[e(_,{to:"/loginPage",className:"nav-link",children:"Login"}),e(_,{to:"/login",className:"nav-link"})]})})})]})})},pe=()=>{const s=r.exports.useRef(),t=r.exports.useRef(),n=D(),{signin:l}=x(),[a,i]=r.exports.useState(null),[d,h]=r.exports.useState(!0);return o(N,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Login"}),o(f,{onSubmit:async p=>{p.preventDefault(),i(null);try{h(!0),await l(s.current.value,t.current.value),n("/")}catch(u){i(u.message),h(!1)}},children:[a&&e(M,{variant:"danger",children:a}),o(f.Group,{id:"email",children:[e(f.Label,{children:"Email"}),e(f.Control,{type:"email",ref:s,placeholder:"Enter email",required:!0})]}),o(f.Group,{id:"Password",children:[e(f.Label,{children:"Password"}),e(f.Control,{type:"password",ref:t,placeholder:"Password",required:!0})]}),e(C,{className:"text-center",variant:"primary",type:"submit",children:"Sign In"})]}),o("div",{className:"text-center mt-3",children:["Need an account? ",e(E,{to:"/signup",children:"Sign Up"})]})]})},he=()=>{const{signup:s}=x(),[t,n]=r.exports.useState(),l=r.exports.useRef(),a=r.exports.useRef(),i=r.exports.useRef(),[d,h]=r.exports.useState(null),c=D();return o(N,{className:"col-md-4 py-5",children:[e("h1",{className:"text-center",children:"Sign up"}),o(f,{onSubmit:async u=>{if(u.preventDefault(),a.current.value!==i.current.value)return h("The passwords does not match");h(null);try{n(!0),await s(l.current.value,a.current.value),c("/")}catch(m){h(m.message),n(!1)}},children:[d&&e(M,{variant:"danger",children:d}),o(f.Group,{id:"email",children:[e(f.Label,{children:"Email"}),e(f.Control,{ref:l,type:"email",placeholder:"Email",required:!0})]}),o(f.Group,{id:"password",children:[e(f.Label,{children:"Create a password"}),e(f.Control,{ref:a,type:"password",name:"password",placeholder:"Password",required:!0})]}),o(f.Group,{id:"password",children:[e(f.Label,{children:"Confirm password"}),e(f.Control,{ref:i,type:"password",placeholder:"Confirm Password",required:!0})]}),e(C,{disabled:t,className:"text-center",variant:"primary",type:"submit",children:"Submit"})]}),o("div",{className:"text-center mt-3",children:["Already a member? ",e(E,{to:"/login",children:"Log In"})]})]})},nt=()=>{const{onlineUser:s}=x();return e(I,{children:s?e(pe,{}):e(he,{})})},at=()=>{const{signout:s}=x(),t=D();return r.exports.useEffect(async()=>{await s(),t("/")},[]),e(N,{className:"col-md-4 py-5",children:e("div",{className:"text-center",children:e("p",{children:" You're being signed out"})})})},rt=s=>{const[t,n]=r.exports.useState(0),[l,a]=r.exports.useState(null),[i,d]=r.exports.useState(null),{onlineUser:h}=x(),c=q();return r.exports.useEffect(()=>{const p=Q($,`${h.uid}/images/ ${s.name}`),u=k(S,"images");z(p,s).on("state_changed",m=>{n(Math.round(m.bytesTransferred/m.totalBytes*100))},m=>{a(m)},async()=>{const m=await B(p);d(m),await re(u,{created:Y(),name:s.name,owner:h.uid,path:p.fullPath,size:s.size,type:s.type,url:m,_id:c})})},[s]),{progress:t,url:i,message:l}},lt=({file:s,setFile:t})=>{const{progress:n,url:l}=rt(s);return r.exports.useEffect(()=>{l&&t(null)},[l,t]),e(I,{children:n&&e("div",{className:n,style:{width:n},children:n})})},ot=()=>{const[s,t]=r.exports.useState(null),[n,l]=r.exports.useState(null),a=i=>{let d=i.target.files[0];d&&d.type.includes("image")?(t(d),l({type:"success",msg:"File uploaded"})):(t(null),l({type:"warning",msg:"File must be an image"}))};return e("div",{className:"UploadForm",children:o(f,{children:[n&&e(M,{variant:n.type,children:n.msg}),e("h2",{children:"Upload Image"}),o("label",{children:[e("input",{type:"file",onChange:a}),e("span",{children:"+"})]}),e("div",{className:"output",children:s&&e(lt,{file:s,setFile:t})})]})})},it=(s={})=>{const{onlineUser:t}=x(),n=s.fetchReviewFolders?k(S,"reviewalbums"):k(S,t.uid),l=s.fetchReviewFolders?["reviewalbums"]:[t.uid],a=T(n);return H(l,a,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},ct=({query:s})=>{const t=D(),{onlineUser:n}=x();return o(N,{children:[o("div",{className:"text-center",children:[" ",e("h1",{children:"Folders"})," "]}),e("div",{className:"folder-grid",children:s.data&&s.data.map(l=>e("div",{className:"folder-wrap",onClick:()=>t("/folders/"+l.folderName+"/"+n.uid),children:o("h6",{children:["  ",l.folderName," "]})},l._id))})]})},dt=()=>{const s=ue({fetchUserImages:!0}),t=it();return e("div",{className:"myprofile",children:o(N,{className:"py-3",children:[e("h1",{children:"Profile"}),e(ot,{}),o("div",{className:"text-center",children:[e("h2",{children:" Upload Folder"}),e(E,{to:"/uploadfolder",children:e("span",{className:"plus",children:"+"})})]}),e(ct,{query:t}),e(de,{query:s})]})})},ut=()=>{const[s,t]=r.exports.useState(0),[n,l]=r.exports.useState(null),{onlineUser:a}=x(),[i,d]=r.exports.useState(null);return{progress:s,UploadFolder:(c,p,u)=>{const m=q();p===void 0&&(p=[]),u===void 0&&(u=[]);const y=Q($,"folders/"+m);z(y,c,p).on("state_changed",g=>{t(Math.round(g.bytesTransferred/g.totalBytes*100))},g=>{l(g)},async()=>{const g=await B(y);d(g);const F=V(S,a.uid,c.name);await Oe(F,{created:Y(),folderName:c.name,path:y.fullPath,owner:a.uid,url:g,_id:m,folderCover:p.name,folderImages:u})})},url:i,message:n}},pt=()=>{const{UploadFolder:s}=ut(),t=r.exports.useRef(),n=r.exports.useRef(),[l,a]=r.exports.useState(!1),[i,d]=r.exports.useState(null),[h,c]=r.exports.useState(null),[p,u]=r.exports.useState(),m=()=>{const F=t.current.value;return u(F),p},y=F=>{let L=F.target.files[0];L&&L.type.includes("image")?d(L):(d(null),c({type:"warning",msg:"File must be an image"}))};return e(N,{children:o(f,{onSubmit:async F=>{F.preventDefault(),await s({name:t.current.value},i),c({type:"success",msg:"Folder uploaded, go to folder to upload images"})},children:[e("h1",{children:"Create new Folder"}),o(f.Group,{id:"folder",className:"mb-3",children:[e(f.Label,{children:"Foldername:"}),e(f.Control,{type:"text",ref:t,onChange:m}),e(f.Label,{children:"Upload cover: "}),e("input",{type:"file",ref:n,onChange:y})]}),e(C,{disabled:l,type:"submit",children:e("h4",{children:"Create Folder"})}),h&&e(M,{variant:h.type,children:h.msg})]})})},ht=()=>{const s=J(),[t,n]=r.exports.useState(s.userid),l=k(S,t);return{updateTitle:async(i,d)=>{const h=await Ee(l);let c=[];h.forEach(m=>{c.push(O({id:m.id,name:m.name},m.data()))});const p=c.find(m=>m.folderName===i),u=V(S,t,p.id);le(u,{folderName:d})}}},mt=()=>{const[s,t]=r.exports.useState(0),[n,l]=r.exports.useState(null),[a,i]=r.exports.useState(null),{onlineUser:d}=x();return{progress:s,url:a,message:n,uploadImage:async(c,p)=>{if(!c||c==null)return;const u=q(),m=Q($,`${d.uid}/${p}/${c.name}`),y=V(S,d.uid,p);z(m,c).on("state_changed",g=>{t(Math.round(g.bytesTransferred/g.totalBytes*100))},g=>{l(g)},async()=>{const g=await B(m);i(g),await le(y,{folderImages:_e({name:c.name,owner:d.uid,path:m.fullPath,size:c.size,type:c.type,url:g,_id:u})}),t(null)})}}},gt=s=>{const t=mt(),n=r.exports.useCallback(p=>{!p.length||p.forEach(u=>{t.uploadImage(u,s.albumname)})},[]),{getRootProps:l,getInputProps:a,acceptedFiles:i,isDragActive:d,isDragAccept:h,isDragReject:c}=qe({accept:"image/gif, image/jpeg, image/png, image/webp",onDrop:n,maxFiles:1});return o("div",te(O({},l()),{id:"upload-image-dropzone-wrapper",className:`${h?"drag-accept":""} ${c?"drag-reject":""}`,children:[e("input",O({},a())),d?h?e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}):e("p",{children:"not accepted format"}):e("div",{className:"dropzone",children:e("p",{children:"Drop file here"})}),i.length>0&&e("div",{className:"accepted-files mt-2",children:e("ul",{className:"list-unstyled",children:i.map(p=>o("li",{children:[p.name," (",Math.round(p.size/1024)," kb)"]},p.name))})}),e("div",{className:"py-5",children:t.progress!==null&&e(Qe,{variant:"success",animated:!0,now:t.progress})})]}))},ft=()=>{const[s,t]=r.exports.useState(null),{onlineUser:n}=x(),[l,a]=r.exports.useState(null);return{UploadReview:(d,h)=>{const c=q();d.folderimages===void 0;const p=Q($,"/revfolders/"+c);z(p,d).on("state_changed",u=>{},u=>{t(u)},async()=>{const u=await B(p);a(u);const m=k(S,n.uid);var y=new Date,g=y.getHours()+":"+y.getMinutes()+":"+y.getSeconds();await re(m,{created:Y(),folderName:g,path:p.fullPath,url:u,_id:c,folderImages:d.folderimages})})},url:l,message:s}},yt=({query:s})=>{const t=J();console.log(t);const n=D(),{UploadReview:l}=ft(),[a,i]=r.exports.useState(!1),[d,h]=r.exports.useState([]),[c,p]=r.exports.useState([]),[u,m]=r.exports.useState([]),[y,g]=r.exports.useState([]),[F,L]=r.exports.useState("Create review album"),[X,ge]=r.exports.useState(null),fe=()=>{d==s.data[0].folderImages.length?(L("Thank you for the review"),l({owner:t.userid,folderimages:c})):ge("Please review all images before creating a review")},ye=v=>{const b=c.filter(w=>w.path==v.path),U=u.filter(w=>w.path==v.path);if(!(b.length||U.length)){const w=y.filter(A=>A.path==v.path),P=y.indexOf(w);y.splice(P,1),v.className="likedstyle",c.push(v),h(c.length+u.length)}},ve=v=>{const b=c.filter(w=>w.path==v.path),U=u.filter(w=>w.path==v.path);if(!(b.length||U.length)){const w=y.filter(A=>A.path==v.path),P=y.indexOf(w);y.splice(P,1),v.className="dislikedstyle",u.push(v),h(c.length+u.length)}},xe=v=>{if(!y.filter(U=>U.path==v.path).includes(v)){y.push(v);const U=c.filter(K=>K.path==v.path),w=u.filter(K=>K.path==v.path),P=c.indexOf(U),A=c.indexOf(w);c.splice(P,1),u.splice(A,1),v.className="neutralstyle",h(c.length+u.length)}};return o(N,{children:[o(se,{children:[o("div",{className:"text-center",children:[" ",e("h1",{children:"Images"})]}),e(C,{type:"submit",onClick:()=>i(!a),children:e("h2",{children:"Review Album"})}),e("div",{className:"img-grid",children:s.data&&s.data.map(v=>v.folderImages.map(b=>e("div",{className:b.className?b.className:"img-wrap",children:o(I,{children:["  ",e("img",{src:b.url,alt:"uploaded image"}),a&&o("div",{className:"rewiew-btns",children:[e(G,{className:"like-btn",onClick:()=>{xe(b)},icon:ze}),e(G,{className:"like-btn",onClick:()=>{ye(b)},icon:Be}),e(G,{className:"dislike-btn",onClick:()=>{ve(b)},icon:Ge})]})]})},b._id)))})]}),a&&o(I,{children:[" ",o("h3",{children:[d<=0?"0":d," / ",s.data?s.data[0].folderImages.length:"0"," "]}),e(C,{type:"submit",onClick:()=>{fe()},children:e("h2",{children:F})})]}),X&&o(M,{variant:"danger",children:[X,"  ",e(C,{onClick:()=>n("/myprofile"),children:e("h2",{children:"Redo review"})})," "]})]})},vt=(s={})=>{const[t,n]=r.exports.useState(s.FolderId),l=k(S,s.folderid),a=s.fetchAlbumImages?[t,s.foldername]:["images"],i=s.fetchAlbumImages?T(l,ne("folderName","==",s.foldername)):T(l);return H(a,i,{idField:"_id",subscribe:!0},{refetchOnMount:"always"})},me=()=>{const{onlineUser:s}=x(),t=J(),[n,l]=r.exports.useState(!1),a=r.exports.useRef(),{updateTitle:i}=ht(t.foldername),[d,h]=r.exports.useState(t.foldername),[c,p]=r.exports.useState("https://spontaneous-beijinho-8ddd64.netlify.app/#/folders/"+t.foldername+"/"+t.userid),u=vt({fetchAlbumImages:!0,foldername:t.foldername,folderid:t.userid}),m=()=>{var g=document.getElementById("urlInput");g.select(),g.setSelectionRange(0,99999),navigator.clipboard.writeText(g.value)};return o(I,{children:[o(N,{className:"singleFolder",children:[o("h3",{children:[" Folder ",d]}),o("h2",{children:["   ",e("span",{className:"spantext",children:"Url/Upload/NameChange? PRESS COG "}),e(G,{icon:je,onClick:()=>l(!n)})," "]})]}),s&&n&&o(N,{className:"foldername col-md-4 py-5",children:[e("h2",{children:"Change foldername:"}),o(f,{onSubmit:g=>{g.preventDefault(),i(t.foldername,a.current.value),t.foldername!==a.current.value&&h(a.current.value)},children:[e(f.Control,{type:"text",ref:a}),e(C,{type:"submit",children:e("h3",{children:"Submit"})})]}),e(gt,{albumname:t.foldername}),o("p",{children:["Share Folderurl:  ",e("input",{type:"text",value:c,id:"urlInput",readOnly:!0})," ",e(C,{onClick:m,children:"Copy text"})]})]}),e(yt,{query:u})]})};function xt(){return o(I,{children:[e(st,{}),e("div",{className:"App",children:o($e,{children:[e(R,{path:"/",element:e(tt,{})}),e(R,{path:"/loginpage",element:e(nt,{})}),e(R,{path:"/login",element:e(pe,{})}),e(R,{path:"/signup",element:e(he,{})}),e(R,{path:"/logout",element:e(at,{})}),e(R,{path:"/folders/:foldername/:userid",element:e(me,{})}),e(R,{path:"/revfolders/:foldername/:userid",element:e(me,{})}),e(R,{path:"/myprofile",element:e(ce,{redirectTo:"/login",children:e(dt,{})})}),e(R,{path:"/uploadfolder",element:e(ce,{redirectTo:"/login",children:e(pt,{})})})]})})]})}const wt=new Ke({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:1e3*60*2,cacheTime:1e3*60*60*4}}});He.render(e(We.StrictMode,{children:e(Ye,{client:wt,children:e(Ve,{children:e(et,{children:e(Je,{children:e(xt,{})})})})})}),document.getElementById("root"));
